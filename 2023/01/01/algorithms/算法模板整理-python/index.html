

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Curious;">
  <meta name="keywords" content="">
  
    <meta name="description" content="算法模板整理-python1. 常用ACM模式输入&#x2F;输出 输入  12345678910111213n &#x3D; int(input())s &#x3D; input().strip()nums &#x3D; list(map(int, input().strip().split()))# 这里直接try-except可能会让别的报错弹不出来while True:    try:        a, b &#x3D; ma">
<meta property="og:type" content="article">
<meta property="og:title" content="算法模板整理-python">
<meta property="og:url" content="http://example.com/2023/01/01/algorithms/%E7%AE%97%E6%B3%95%E6%A8%A1%E6%9D%BF%E6%95%B4%E7%90%86-python/index.html">
<meta property="og:site_name" content="Curious;的个人划水博客">
<meta property="og:description" content="算法模板整理-python1. 常用ACM模式输入&#x2F;输出 输入  12345678910111213n &#x3D; int(input())s &#x3D; input().strip()nums &#x3D; list(map(int, input().strip().split()))# 这里直接try-except可能会让别的报错弹不出来while True:    try:        a, b &#x3D; ma">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026214611115.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026210535237.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026211155567.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026212441327.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026212501292.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233005521.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233023988.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234434965.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234446218.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233319005.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233328194.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233336441.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234033703.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234043801.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234147392.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234931350.png">
<meta property="og:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029235036694.png">
<meta property="article:published_time" content="2023-01-01T03:36:11.000Z">
<meta property="article:modified_time" content="2023-01-01T07:54:10.003Z">
<meta property="article:author" content="Curious;">
<meta property="article:tag" content="algorithms">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026214611115.png">
  
  
  
  <title>算法模板整理-python - Curious;的个人划水博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Curious;的个人划水博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="算法模板整理-python"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-01-01 11:36" pubdate>
          2023年1月1日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          42k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          349 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">算法模板整理-python</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="算法模板整理-python"><a href="#算法模板整理-python" class="headerlink" title="算法模板整理-python"></a>算法模板整理-python</h1><h2 id="1-常用ACM模式输入-x2F-输出"><a href="#1-常用ACM模式输入-x2F-输出" class="headerlink" title="1. 常用ACM模式输入&#x2F;输出"></a>1. 常用ACM模式输入&#x2F;输出</h2><ul>
<li>输入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><br>s = <span class="hljs-built_in">input</span>().strip()<br><br>nums = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split()))<br><br><span class="hljs-comment"># 这里直接try-except可能会让别的报错弹不出来</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-keyword">try</span>:<br>        a, b = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">input</span>().strip().split())<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;input_EOFError: &quot;</span>, a, b)<br>    <span class="hljs-keyword">except</span> EOFError:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure>

<ul>
<li>小数输出相关+小数计算，需要<code>from decimal import Decimal</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 小数的输出相关，有一次leetcode算斜率被这个精度问题给卡了，希望不会这么折磨人</span><br><span class="hljs-comment">## 四舍五入，由于直接用.2f和round可能会有不准确的舍入问题，这里可能需要decimal模块</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> decimal <span class="hljs-keyword">import</span> Decimal<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = Decimal(<span class="hljs-number">0.333333333</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = Decimal(<span class="hljs-number">0.222222222</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = a - b<br><span class="hljs-meta">&gt;&gt;&gt; </span>c<br>Decimal(<span class="hljs-string">&#x27;0.1111111110000000123942953678&#x27;</span>)<br><br><span class="hljs-comment">## 保留几位小数由像第二个括号中的几位小数决定，即保留两位小数，精确到0.01</span><br><span class="hljs-comment">## 如果想要四舍五入保留整数，那么第二个括号中就应该为&quot;1.&quot;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">0.125</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a_t = Decimal(a).quantize(Decimal(<span class="hljs-string">&quot;0.01&quot;</span>), rounding = <span class="hljs-string">&quot;ROUND_HALF_UP&quot;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(a_t)<br><span class="hljs-number">0.13</span><br><br><span class="hljs-comment">## rounding参数，熟练使用ROUND_DOWN和ROUND_UP模式，感觉是向下舍和向上直接进位</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">0.128</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a_t = Decimal(a).quantize(Decimal(<span class="hljs-string">&quot;0.01&quot;</span>), rounding = <span class="hljs-string">&quot;ROUND_DOWN&quot;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(a_t)<br><span class="hljs-number">0.12</span><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">0.121</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a_t = Decimal(a).quantize(Decimal(<span class="hljs-string">&quot;0.01&quot;</span>), rounding = <span class="hljs-string">&quot;ROUND_UP&quot;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(a_t)<br><span class="hljs-number">0.13</span><br><br>decimal.ROUND_CEILING			| 		舍入方向为 Infinity。<br>decimal.ROUND_DOWN				| 		舍入方向为零。<br>decimal.ROUND_FLOOR				| 		舍入方向为 -Infinity。<br>decimal.ROUND_HALF_DOWN			| 		舍入到最接近的数，同样接近则舍入方向为零。<br>decimal.ROUND_HALF_EVEN			| 		舍入到最接近的数，同样接近则舍入到最接近的偶数。<br>decimal.ROUND_HALF_UP			| 		舍入到最接近的数，同样接近则舍入到零的反方向。<br>decimal.ROUND_UP				| 		舍入到零的反方向。<br>decimal.ROUND_05UP				| 		如果最后一位朝零的方向舍入后为 <span class="hljs-number">0</span> 或 <span class="hljs-number">5</span> 则舍入到零的反方向；否则舍入方向为零。<br></code></pre></td></tr></table></figure>

<h2 id="2-数学-x2F-素数相关"><a href="#2-数学-x2F-素数相关" class="headerlink" title="2. 数学&#x2F;素数相关"></a>2. 数学&#x2F;素数相关</h2><h3 id="2-1-判断-x2F-筛是否是素数"><a href="#2-1-判断-x2F-筛是否是素数" class="headerlink" title="2.1 判断&#x2F;筛是否是素数"></a>2.1 判断&#x2F;筛是否是素数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 简单版 log(n)</span><br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_prime</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">if</span> x==<span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-built_in">int</span>(math.sqrt(x))+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> x%i==<span class="hljs-number">0</span>:<br>           <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <br><span class="hljs-comment"># 素数筛选，筛选出小于等于一个数字的素数</span><br><span class="hljs-comment"># 典型题目是可以是筛选一个区间[L, U]之内的素数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sieve_of_eratosthenes</span>(<span class="hljs-params">n</span>):<br>    pick = [<span class="hljs-number">1</span>] * (n+<span class="hljs-number">1</span>)<br>    pick[<span class="hljs-number">0</span>] = pick[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> pick[i] != <span class="hljs-number">0</span>:<br>        	<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i*i, n+<span class="hljs-number">1</span>, i):<br>          	  pick[j] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> pick[x]]<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>sieve_of_eratosthenes(<span class="hljs-number">100</span>)<br>[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">17</span>, <span class="hljs-number">19</span>, <span class="hljs-number">23</span>, <span class="hljs-number">29</span>, <span class="hljs-number">31</span>, <span class="hljs-number">37</span>, <span class="hljs-number">41</span>, <span class="hljs-number">43</span>, <span class="hljs-number">47</span>, <span class="hljs-number">53</span>, <span class="hljs-number">59</span>, <span class="hljs-number">61</span>, <span class="hljs-number">67</span>, <span class="hljs-number">71</span>, <span class="hljs-number">73</span>, <span class="hljs-number">79</span>, <span class="hljs-number">83</span>, <span class="hljs-number">89</span>, <span class="hljs-number">97</span>]<br></code></pre></td></tr></table></figure>

<h3 id="2-2-质因数分解"><a href="#2-2-质因数分解" class="headerlink" title="2.2 质因数分解"></a>2.2 质因数分解</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">breakdown</span>(<span class="hljs-params">N</span>):<br>    result = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(sqrt(N)) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> N % i == <span class="hljs-number">0</span>: <span class="hljs-comment"># 如果 i 能够整除 N，说明 i 为 N 的一个质因子。</span><br>            <span class="hljs-keyword">while</span> N % i == <span class="hljs-number">0</span>:<br>                N = N // i<br>                result.append(i)<br>    <span class="hljs-keyword">if</span> N != <span class="hljs-number">1</span>: <span class="hljs-comment"># 说明再经过操作之后 N 留下了一个素数</span><br>        result.append(N)<br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(breakdown(<span class="hljs-number">120</span>))  <span class="hljs-comment"># 输出[2, 2, 2, 3, 5]</span><br><br></code></pre></td></tr></table></figure>

<h3 id="2-3-最大公因数，最小公倍数"><a href="#2-3-最大公因数，最小公倍数" class="headerlink" title="2.3 最大公因数，最小公倍数"></a>2.3 最大公因数，最小公倍数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 最大公因数，直接使用math.gcd()</span><br><span class="hljs-keyword">import</span> math<br>gcd = math.gcd(<span class="hljs-number">5</span>, <span class="hljs-number">25</span>)<br><span class="hljs-built_in">print</span>(gcd)  <span class="hljs-comment"># 5</span><br><br><span class="hljs-comment"># 最小公倍数就是乘在一起，然后除最大公因数</span><br>lcm = (x * y) / gcd(x, y)<br></code></pre></td></tr></table></figure>

<h3 id="2-4-快速幂取模"><a href="#2-4-快速幂取模" class="headerlink" title="2.4 快速幂取模"></a>2.4 快速幂取模</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fast_power</span>(<span class="hljs-params">base, power, mod</span>):<br>    res = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> power &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">if</span> power % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>:<br>            res = res * base % mod<br>        power = power // <span class="hljs-number">2</span><br>        base = base * base % mod<br>    <span class="hljs-keyword">return</span> res % mod<br></code></pre></td></tr></table></figure>

<h3 id="2-5-韩信点兵问题（中国剩余定理）"><a href="#2-5-韩信点兵问题（中国剩余定理）" class="headerlink" title="2.5 韩信点兵问题（中国剩余定理）"></a>2.5 韩信点兵问题（中国剩余定理）</h3><img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026214611115.png" srcset="/img/loading.gif" lazyload alt="image-20221026214611115" style="zoom:50%;" />

<p>其中$m1, m2, mk$两两互素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 求两个数的最大公约数gcd函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">gcd</span>(<span class="hljs-params">a,b</span>):<br>    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> a<br>    <span class="hljs-keyword">else</span> :<br>        <span class="hljs-keyword">return</span> gcd(b,a % b)<br><br> 判断一个列表任意两个数是否两两互质<br> <span class="hljs-keyword">def</span> <span class="hljs-title function_">compare</span>(<span class="hljs-params"><span class="hljs-built_in">list</span></span>):<br>     <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>)):<br>         flag = <span class="hljs-number">1</span><br>         <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>)):<br>             <span class="hljs-keyword">if</span> gcd(<span class="hljs-built_in">list</span>[i],<span class="hljs-built_in">list</span>[j]) != <span class="hljs-number">1</span>:<br>                 <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;不能直接使用中国剩余定理！&#x27;</span>)<br>                exit()<br><span class="hljs-comment">#如果满足条件，就会继续执行，否则退出程序</span><br><br><br><span class="hljs-comment"># 求出输入的m1,m2,..,mk 的乘积m</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">product_m</span>(<span class="hljs-params"><span class="hljs-built_in">list</span></span>):<br>    m = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>:<br>        m *= i<br>    <span class="hljs-keyword">return</span> m<br><br><br><span class="hljs-comment"># 求M1,M2,..,MK 的值 Mj = m / mj 并返回一个名为shang的列表</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_divsion</span>(<span class="hljs-params"><span class="hljs-built_in">list</span>,m</span>):<br>    div = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">list</span>:<br>        div.append(m // i)<br>    <span class="hljs-keyword">return</span> div<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_inverse</span>(<span class="hljs-params">a, m</span>):  <span class="hljs-comment"># 求一个数a 的逆  再模m 的值  这个函数返回的是一个值不是列表</span><br>    <span class="hljs-keyword">if</span> gcd(a, m) != <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>    u1, u2, u3 = <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, a<br>    v1, v2, v3 = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, m<br>    <span class="hljs-keyword">while</span> v3 != <span class="hljs-number">0</span>:<br>        q = u3 // v3<br>        v1, v2, v3, u1, u2, u3 = (u1 - q * v1), (u2 - q * v2), (u3 - q * v3), v1, v2, v3<br>    <span class="hljs-keyword">return</span> u1 % m<br><br><br><span class="hljs-comment"># 求Xj   算法为：Xj = (M * M_INVERSE * a) % mj</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_x</span>(<span class="hljs-params">M:<span class="hljs-built_in">int</span> ,M_inverse:<span class="hljs-built_in">int</span> ,a :<span class="hljs-built_in">int</span>,m:<span class="hljs-built_in">int</span></span>):<br>    product_x = (M * M_inverse * a) % m<br>    <span class="hljs-keyword">return</span> product_x<br><br><br><br><span class="hljs-comment"># 算出最终答案X = X1+X2+...Xk</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_solution</span>(<span class="hljs-params">list_m, list_a</span>):<br>                                                        <span class="hljs-comment"># compare(list_m)</span><br>    m = product_m(list_m)<br><br>    list_M = get_divsion(list_m, m)<br><br>    list_M_inverse = []<br>    list_X = []<br>    total = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(list_M)):<br>        list_M_inverse.append(get_inverse(list_M[i], list_m[i]))<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(list_M)):<br>        list_X.append(get_x(list_M[i],list_M_inverse[i],list_a[i],m))<br><br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> list_X:<br>        total += x<br><br>    <span class="hljs-keyword">return</span> total % m<br><br><span class="hljs-comment"># 测试数据</span><br><span class="hljs-comment">#list_a = [2,3,2]</span><br><span class="hljs-comment">#list_m = [3,5,7]</span><br><span class="hljs-comment">#print(get_solution(list_m, list_a))</span><br><br><span class="hljs-comment"># 调用get_solution()函数即可使用中国剩余定理</span><br><span class="hljs-comment"># get_solution()函数要传入得是两个列表list_a,list_m</span><br><span class="hljs-comment"># 读取与输入list_a,list_m;并将其变为整型的数据在</span><br></code></pre></td></tr></table></figure>

<p>针对他提供的这组测试数据，输出的是23，所以结果应该是23 + 105n，其中105是m的最小公倍数！</p>
<h3 id="2-6-欧拉函数-amp-欧拉定理"><a href="#2-6-欧拉函数-amp-欧拉定理" class="headerlink" title="2.6 欧拉函数&amp;欧拉定理"></a>2.6 欧拉函数&amp;欧拉定理</h3><ul>
<li>欧拉函数</li>
</ul>
<p>在数论，对正整数n，欧拉函数是小于n的正整数中与n互质的数的数目</p>
<p>如果$p$是素数，那么$\varphi(p)&#x3D;p-1$</p>
<p>如果$p$不是素数，那么要先分解质因数满足<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026210535237.png" srcset="/img/loading.gif" lazyload alt="image-20221026210535237" style="zoom:20%;" />，</p>
<p>然后<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026211155567.png" srcset="/img/loading.gif" lazyload alt="image-20221026211155567" style="zoom:20%;" /></p>
<ul>
<li>欧拉定理</li>
</ul>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026212441327.png" srcset="/img/loading.gif" lazyload alt="image-20221026212441327" style="zoom:50%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221026212501292.png" srcset="/img/loading.gif" lazyload alt="image-20221026212501292" style="zoom:50%;" />

<h3 id="2-7-分块打表"><a href="#2-7-分块打表" class="headerlink" title="2.7 分块打表"></a>2.7 分块打表</h3><p>这个leetcode题目是一个分块打表的思路，比如数据范围是$10^9$这个规模的，那么就可以分成$2000(2<em>10^3)$个，$500000(5</em>10^5)$规模的数据块，这样处理完后，可以把一些结果先给跑出来，然后分块的来做，也是竞赛常用的手段之一</p>
<ul>
<li>Leetcode2376 - 统计特殊整数</li>
</ul>
<p>如果一个正整数中每一位是<strong>互不相同</strong>的，称他是<strong>特殊整数</strong>。</p>
<p>给定一个正整数<code>n</code>，返回<code>[1, n]</code>之间特殊整数的数目。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：n = 20<br>输出：19<br>解释：1 到 20 之间所有整数除了 11 以外都是特殊整数。所以总共有 19 个特殊整数。<br><br>输入：n = 5<br>输出：5<br>解释：1 到 5 所有整数都是特殊整数。<br><br>输入：n = 135<br>输出：110<br>解释：从 1 到 135 总共有 110 个整数是特殊整数。<br>不特殊的部分数字为：22 ，114 和 131 。<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">countSpecialNumbers</span>(<span class="hljs-params">self, n</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type n: int</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        table = [<span class="hljs-number">0</span>, <span class="hljs-number">92970</span>,<span class="hljs-number">75600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">33600</span>,<span class="hljs-number">26880</span>,<span class="hljs-number">7560</span>,<span class="hljs-number">12600</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">7560</span>,<span class="hljs-number">12600</span>,<span class="hljs-number">7560</span>,<span class="hljs-number">12600</span>,<span class="hljs-number">7560</span>,<span class="hljs-number">12600</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>,<span class="hljs-number">10080</span>, ...]<br><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-comment"># 首先找到n是属于哪个block的</span><br>        <span class="hljs-comment"># 甚至可以前缀和，或者遍历一下</span><br>        block_size = <span class="hljs-number">5</span> * (<span class="hljs-number">10</span> ** <span class="hljs-number">5</span>)<br>        bs_cnt = n // block_size<br>        base_res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(bs_cnt+<span class="hljs-number">1</span>):<br>            base_res += table[i]<br>            <span class="hljs-comment"># print(i)</span><br><br><br>        <span class="hljs-comment"># 之后在那个区间上单独求解</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(bs_cnt*block_size+<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>            <span class="hljs-comment"># 判重逻辑写法1，可能在大数据的条件下，这个会要求效率再高一些吧</span><br>            s = <span class="hljs-built_in">str</span>(i)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(<span class="hljs-built_in">list</span>(s)))) == <span class="hljs-built_in">len</span>(s):<br>                res += <span class="hljs-number">1</span><br><br>        res += base_res<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>

<h3 id="2-8-基础数学定理-amp-常用数学公式"><a href="#2-8-基础数学定理-amp-常用数学公式" class="headerlink" title="2.8 基础数学定理&amp;常用数学公式"></a>2.8 基础数学定理&amp;常用数学公式</h3><ul>
<li>海伦公式</li>
</ul>
<p>已知三边长分别为<code>a</code> <code>b</code> <code>c</code>，求这个三角形的面积（实际操作的时候还要注意三边不满足三角形的情况）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br><span class="hljs-comment"># s 定义为周长的一半</span><br>s = <span class="hljs-number">0.5</span> * (a+b+c)<br><br><span class="hljs-comment">## ss为所求面积</span><br>ss = math.sqrt(s*(s-a)*(s-b)*(s-c))<br></code></pre></td></tr></table></figure>

<ul>
<li>哥德巴赫猜想（CF735D-Taxes）</li>
</ul>
<p>题意：已知n元需缴税为n的最大因子x元。现通过将n元分成k份的方式来减少缴税。问通过这种处理方式需缴纳的税费。</p>
<p>分析：</p>
<p>1、若n为素数，不需分解，可得1</p>
<p>2、若n为偶数，由哥德巴赫猜想：一个大于2的偶数可以分解成两个素数的和，可得2</p>
<p>3、若n为奇数，n-2为素数，则为2，否则为3。(因为若为奇数要拆，不能拆成1+偶数，至少拆为2+奇数，若此奇数为素数，则输出为2，否则继续拆成3+偶数，那么结果为3(充分利用哥德巴赫猜想的结论))</p>
<h2 id="3-区间查询相关"><a href="#3-区间查询相关" class="headerlink" title="3. 区间查询相关"></a>3. 区间查询相关</h2><h3 id="3-1-线段树（Python版，很有可能超时，不太好使）"><a href="#3-1-线段树（Python版，很有可能超时，不太好使）" class="headerlink" title="3.1 线段树（Python版，很有可能超时，不太好使）"></a>3.1 线段树（Python版，很有可能超时，不太好使）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SegmentTreeNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end, max_val</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        segment tree node structure</span><br><span class="hljs-string">        @param: int start</span><br><span class="hljs-string">        @param: int end</span><br><span class="hljs-string">        @param: int/double max_val</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        self.start = start<br>        self.end = end <br>        self.<span class="hljs-built_in">max</span> = max_val<br>        self.left = <span class="hljs-literal">None</span><br>        self.right = <span class="hljs-literal">None</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RangeMaxQuery</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, A</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        initialize the data stucture</span><br><span class="hljs-string">        @param: list A</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <br>        self.root = self.build_helper(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(A) - <span class="hljs-number">1</span>, A)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">build_helper</span>(<span class="hljs-params">self, left, right, A</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        build the data structure</span><br><span class="hljs-string">        @param: int left: left index</span><br><span class="hljs-string">        @param: int right: right index</span><br><span class="hljs-string">        @param: list A</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> left &gt; right:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span> <br><br>        root = SegmentTreeNode(left, right, A[left])<br><br>        <span class="hljs-keyword">if</span> left == right:<br>            <span class="hljs-keyword">return</span> root <br><br>        mid = (left + right) // <span class="hljs-number">2</span><br>        root.left = self.build_helper(left, mid, A)<br>        root.right = self.build_helper(mid+<span class="hljs-number">1</span>, right, A)<br>        root.<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(root.left.<span class="hljs-built_in">max</span>, root.right.<span class="hljs-built_in">max</span>)<br><br>        <span class="hljs-keyword">return</span> root <br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, index, value</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        update value at index</span><br><span class="hljs-string">        @param: int index</span><br><span class="hljs-string">        @param: double/int value</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        self._modify(self.root, index, value)<br>        <br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_modify</span>(<span class="hljs-params">self, root, index, value</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        helper funcf for updating new value</span><br><span class="hljs-string">        @param: SegmentTreeNode root</span><br><span class="hljs-string">        @param: int index</span><br><span class="hljs-string">        @param: int/double value</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> root.start == root.end <span class="hljs-keyword">and</span> root.start == index:<br>            root.<span class="hljs-built_in">max</span> = value<br>            <span class="hljs-keyword">return</span><br><br>        mid = (root.start + root.end) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> index &lt;= mid:<br>            self._modify(root.left, index, value)<br>            root.<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(root.left.<span class="hljs-built_in">max</span>, root.right.<span class="hljs-built_in">max</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self._modify(root.right, index, value)<br>            root.<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span>(root.left.<span class="hljs-built_in">max</span>, root.right.<span class="hljs-built_in">max</span>)<br>        <span class="hljs-keyword">return</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">range_max_query</span>(<span class="hljs-params">self, start, end</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        maximum value query in range(start, end)</span><br><span class="hljs-string">        @param: int start</span><br><span class="hljs-string">        @param: int end</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> self._max_query(self.root, start, end)<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_max_query</span>(<span class="hljs-params">self, root, start, end</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        help func for range max query</span><br><span class="hljs-string">        @param: SegmentTreeNode root</span><br><span class="hljs-string">        @param: int start</span><br><span class="hljs-string">        @param: int end</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> start &lt;= root.start <span class="hljs-keyword">and</span> root.end &lt;= end:<br>            <span class="hljs-keyword">return</span> root.<span class="hljs-built_in">max</span><br>        mid = (root.start + root.end) // <span class="hljs-number">2</span><br>        ans = -sys.maxsize<br>        <span class="hljs-keyword">if</span> mid &gt;= start:<br>            ans = <span class="hljs-built_in">max</span>(ans, self._max_query(root.left, start, end))<br>        <span class="hljs-keyword">if</span> mid + <span class="hljs-number">1</span> &lt;= end:<br>            ans = <span class="hljs-built_in">max</span>(ans, self._max_query(root.right, start, end))<br>        <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-comment"># 这里的用法是闭区间的用法</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>A = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>]         <br><span class="hljs-meta">&gt;&gt;&gt; </span>arr = RangeMaxQuery(A)      <span class="hljs-comment"># initialize data structure</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>arr.range_max_query(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)     <span class="hljs-comment"># maximum query in range(1, 4)</span><br><span class="hljs-number">7</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>arr.update(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)           <span class="hljs-comment"># set A[1] = 10 and update the data structure</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>arr.range_max_query(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>

<h3 id="3-2-ST表-RMQ"><a href="#3-2-ST表-RMQ" class="headerlink" title="3.2 ST表+RMQ"></a>3.2 ST表+RMQ</h3><p>和线段树比，比较大的问题是他不好修改，就是初始化一次了之后，可能就这样了</p>
<p>对于所有maxquery问题，可以把正数变成负数，就变成了minquery问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">ST</span>(<span class="hljs-params">A</span>):<br>    log = <span class="hljs-number">0</span><br>    l = <span class="hljs-built_in">len</span>(A)<br>    <br>    l &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> l != <span class="hljs-number">0</span>:<br>        l &gt;&gt;= <span class="hljs-number">1</span><br>        log += <span class="hljs-number">1</span><br>    <br>    dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(log+<span class="hljs-number">5</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(A))]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(A)):<br>        dp[i][<span class="hljs-number">0</span>] = A[i]<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, log+<span class="hljs-number">1</span>):<br>        i = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> i + (<span class="hljs-number">1</span>&lt;&lt;j) - <span class="hljs-number">1</span> &lt; <span class="hljs-built_in">len</span>(A):<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j-<span class="hljs-number">1</span>], dp[i+(<span class="hljs-number">1</span>&lt;&lt;(j-<span class="hljs-number">1</span>))][j-<span class="hljs-number">1</span>])<br>            i += <span class="hljs-number">1</span><br>    <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(A)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(log+<span class="hljs-number">1</span>, log+<span class="hljs-number">4</span>):<br>            dp[i][j] = dp[i][j-<span class="hljs-number">1</span>]<br><br>    <span class="hljs-keyword">return</span> dp<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">RMQ</span>(<span class="hljs-params">dp, l, r</span>):<br>    k = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span> &lt;&lt; (k+<span class="hljs-number">1</span>)) &lt;= r-l+<span class="hljs-number">1</span>:<br>        k += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(dp[l][k], dp[r-(<span class="hljs-number">1</span>&lt;&lt;k)+<span class="hljs-number">1</span>][k])<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment"># 这个也是闭区间，区间都用闭区间还是比较好用</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>A = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>st_table = ST(A)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(RMQ(st_table, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>))<br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<h3 id="3-3-前缀和"><a href="#3-3-前缀和" class="headerlink" title="3.3 前缀和"></a>3.3 前缀和</h3><p>很多区间相关的题目都和前缀和相关，建议定义前缀和的长度和原数组的大小长度是一样的</p>
<p>主要也是统计一个区间中的一个数目</p>
<h2 id="4-数据结构"><a href="#4-数据结构" class="headerlink" title="4. 数据结构"></a>4. 数据结构</h2><h3 id="4-1-排序"><a href="#4-1-排序" class="headerlink" title="4.1 排序"></a>4.1 排序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">nums = [[<span class="hljs-number">2</span>, <span class="hljs-string">&quot;c&quot;</span>], [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;c&quot;</span>], [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>], [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>]]<br>nums.sort(key=<span class="hljs-keyword">lambda</span> x: (x[<span class="hljs-number">0</span>], x[<span class="hljs-number">1</span>]))<br><span class="hljs-built_in">print</span>(nums)  <span class="hljs-comment"># [[1, &#x27;a&#x27;], [1, &#x27;b&#x27;], [1, &#x27;c&#x27;], [2, &#x27;c&#x27;]]</span><br></code></pre></td></tr></table></figure>

<h3 id="4-2-Trie树"><a href="#4-2-Trie树" class="headerlink" title="4.2 Trie树"></a>4.2 Trie树</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TrieNode</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.is_end = <span class="hljs-literal">False</span>  <span class="hljs-comment"># 标志是否是结束位置</span><br>        self.mapping = &#123;&#125;  <span class="hljs-comment"># 字符-&gt;node的mapping</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Trie</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        初始化前缀树对象，root为一个TrieNode</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        self.root = TrieNode()<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">self, word</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        向前缀树种插入字符串word</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        node = self.root<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(word)):<br>            <span class="hljs-keyword">if</span> node.mapping.get(word[i]) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                node.mapping[word[i]] = TrieNode()<br>            node = node.mapping[word[i]]<br>        node.is_end = <span class="hljs-literal">True</span><br>    <br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, word</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        如果字符串word在前缀树中，返回True</span><br><span class="hljs-string">        否则，返回False</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        node = self.root<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(word)):<br>            <span class="hljs-keyword">if</span> node.mapping.get(word[i]) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            node = node.mapping[word[i]]<br>        <br>        <span class="hljs-keyword">if</span> node.is_end == <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">startsWith</span>(<span class="hljs-params">self, word</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        如果之前插入的字符串word的前缀之一为prefix，返回True</span><br><span class="hljs-string">        否则，返回Fasle</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        node = self.root<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(word)):<br>            <span class="hljs-keyword">if</span> node.mapping.get(word[i]) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            node = node.mapping[word[i]]<br>        <br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br><span class="hljs-comment"># Your Trie object will be instantiated and called as such:</span><br><span class="hljs-comment"># obj = Trie()</span><br><span class="hljs-comment"># obj.insert(word)</span><br><span class="hljs-comment"># param_2 = obj.search(word)</span><br><span class="hljs-comment"># param_3 = obj.startsWith(prefix)</span><br></code></pre></td></tr></table></figure>

<h3 id="4-3-二分"><a href="#4-3-二分" class="headerlink" title="4.3 二分"></a>4.3 二分</h3><ul>
<li>二分左右查询（类似于C++中的lower_bound那种函数）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br><br>nums = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">12</span>, <span class="hljs-number">15</span>]<br><br><span class="hljs-comment"># bisect.bisect_left(nums, x)</span><br><span class="hljs-comment"># 在nums中查找x，如果x存在则返回x第一次出现的位置</span><br><span class="hljs-comment"># 否则，返回应该插入的位置</span><br>bisect.bisect_left(nums, <span class="hljs-number">3</span>)  <span class="hljs-comment"># 1</span><br>bisect.bisect_left(nums, <span class="hljs-number">4</span>)  <span class="hljs-comment"># 3</span><br><br>bisect.bisect_left(nums, <span class="hljs-number">2</span>)  <span class="hljs-comment"># 1</span><br><br><br><span class="hljs-comment"># bisect.bisect_right(nums, x)</span><br><span class="hljs-comment"># 在nums中查找x，如果x存在，则返回x最后一次出现的位置，后面的一个位置</span><br><span class="hljs-comment"># 否则，返回应该插入的位置</span><br>bisect.bisect_right(nums, <span class="hljs-number">3</span>)  <span class="hljs-comment"># 3</span><br>bisect.bisect_right(nums, <span class="hljs-number">1</span>)  <span class="hljs-comment"># 1</span><br><br>bisect.bisect_right(nums, <span class="hljs-number">2</span>)  <span class="hljs-comment"># 1</span><br></code></pre></td></tr></table></figure>

<ul>
<li>二分答案（这个是自己的，不一定好使，主要还是+1和-1没整明白）</li>
</ul>
<p>基本思路就是说，二分查找比如[1, 1e9]这个区间，假如mid满足的话，让res&#x3D;mid，然后left&#x3D;mid+1，给卡过去</p>
<p>再详细说一下的话，就是说我如果mid满足，那么比他大的还是有可能满足的，比他小的就可以排除掉了，也就是找到最大的满足条件的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">l = <span class="hljs-number">0</span><br>r = <span class="hljs-built_in">len</span>(nums)<br>res = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> l &lt;= r:<br>    mid = (l + r) // <span class="hljs-number">2</span><br>    flag = <span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> check() <span class="hljs-keyword">else</span> <span class="hljs-literal">False</span>    <br>    <span class="hljs-keyword">if</span> flag:<br>        res = mid<br>        l = mid+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        r = mid-<span class="hljs-number">1</span><br><span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>

<h3 id="4-4-heapq"><a href="#4-4-heapq" class="headerlink" title="4.4 heapq"></a>4.4 heapq</h3><h4 id="4-5-1-基础语法"><a href="#4-5-1-基础语法" class="headerlink" title="4.5.1 基础语法"></a>4.5.1 基础语法</h4><p>优先队列，基础语法</p>
<ul>
<li>创建堆</li>
</ul>
<p>heapq有两种方式创建堆， 一种是使用一个空列表，然后使用heapq.heappush()函数把值加入堆中，另外一种就是使用heap.heapify(list)转换列表成为堆结构</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br><span class="hljs-comment"># 第一种</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">函数定义：</span><br><span class="hljs-string">heapq.heappush(heap, item)</span><br><span class="hljs-string">    - Push the value item onto the heap, maintaining the heap invariant.</span><br><span class="hljs-string">heapq.heappop(heap)</span><br><span class="hljs-string">    - Pop and return the smallest item from the heap, maintaining the heap invariant.</span><br><span class="hljs-string">    If the heap is empty, IndexError is raised. To access the smallest item without popping it, use heap[0].</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>nums = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">54</span>, <span class="hljs-number">23</span>, <span class="hljs-number">132</span>]<br>heap = []<br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>    heapq.heappush(heap, num)  <span class="hljs-comment"># 加入堆</span><br><br><span class="hljs-built_in">print</span>(heap[<span class="hljs-number">0</span>])  <span class="hljs-comment"># 如果只是想获取最小值而不是弹出，使用heap[0]</span><br><span class="hljs-built_in">print</span>([heapq.heappop(heap) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))])  <span class="hljs-comment"># 堆排序结果</span><br><span class="hljs-comment"># out: [1, 2, 3, 5, 23, 54, 132]</span><br><br><br><span class="hljs-comment"># 第二种</span><br>nums = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">54</span>, <span class="hljs-number">23</span>, <span class="hljs-number">132</span>]<br>heapq.heapify(nums)<br><span class="hljs-built_in">print</span>([heapq.heappop(nums) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))])  <span class="hljs-comment"># 堆排序结果</span><br><span class="hljs-comment"># out: [1, 2, 3, 5, 23, 54, 132]</span><br></code></pre></td></tr></table></figure>

<p>heapq 模块还有一个<code>heapq.merge(*iterables)</code> 方法，用于合并多个排序后的序列成一个排序后的序列， 返回排序后的值的迭代器。<br> 类似于<code>sorted(itertools.chain(*iterables))</code>，但返回的是可迭代的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">函数定义：</span><br><span class="hljs-string">heapq.merge(*iterables)</span><br><span class="hljs-string">    - Merge multiple sorted inputs into a single sorted output (for example, merge timestamped entries from multiple log files). Returns an iterator over the sorted values.</span><br><span class="hljs-string">    - Similar to sorted(itertools.chain(*iterables)) but returns an iterable, does not pull the data into memory all at once, and assumes that each of the input streams is already sorted (smallest to largest).</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">import</span> heapq<br><br>num1 = [<span class="hljs-number">32</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">34</span>, <span class="hljs-number">54</span>, <span class="hljs-number">23</span>, <span class="hljs-number">132</span>]<br>num2 = [<span class="hljs-number">23</span>, <span class="hljs-number">2</span>, <span class="hljs-number">12</span>, <span class="hljs-number">656</span>, <span class="hljs-number">324</span>, <span class="hljs-number">23</span>, <span class="hljs-number">54</span>]<br>num1 = <span class="hljs-built_in">sorted</span>(num1)<br>num2 = <span class="hljs-built_in">sorted</span>(num2)<br><br>res = heapq.merge(num1, num2)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(res))<br></code></pre></td></tr></table></figure>

<ul>
<li>访问堆内容</li>
</ul>
<p>堆建好后，可以通过<code>heapq.heappop() </code>函数弹出堆中最小值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br>nums = [<span class="hljs-number">2</span>, <span class="hljs-number">43</span>, <span class="hljs-number">45</span>, <span class="hljs-number">23</span>, <span class="hljs-number">12</span>]<br>heapq.heapify(nums)<br><br><span class="hljs-built_in">print</span>(heapq.heappop(nums))<br><span class="hljs-comment"># out: 2</span><br><br><span class="hljs-comment"># 如果需要所有堆排序后的元素</span><br>result = [heapq.heappop(nums) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))]<br><span class="hljs-built_in">print</span>(result)<br><span class="hljs-comment"># out: [12, 23, 43, 45]</span><br></code></pre></td></tr></table></figure>

<p>如果需要删除堆中最小元素并加入一个元素，可以使用<code>heapq.heaprepalce()</code> 函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br>nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>]<br>heapq.heapify(nums)<br><br>heapq.heapreplace(nums, <span class="hljs-number">23</span>)<br><br><span class="hljs-built_in">print</span>([heapq.heappop(nums) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))])<br><span class="hljs-comment"># out: [2, 3, 4, 5, 23]</span><br></code></pre></td></tr></table></figure>

<ul>
<li>获取堆最大或最小值</li>
</ul>
<p>如果需要获取堆中最大或最小的范围值，则可以使用<code>heapq.nlargest()</code> 或<code>heapq.nsmallest()</code> 函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">函数定义：</span><br><span class="hljs-string">heapq.nlargest(n, iterable[, key])¶</span><br><span class="hljs-string">    - Return a list with the n largest elements from the dataset defined by iterable. </span><br><span class="hljs-string">    - key if provided, specifies a function of one argument that is used to extract a comparison key from each element in the iterable: key=str.lower</span><br><span class="hljs-string">    - Equivalent to: sorted(iterable, key=key, reverse=True)[:n]</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">import</span> heapq<br><br>nums = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>]<br><span class="hljs-built_in">print</span>(heapq.nlargest(<span class="hljs-number">3</span>, nums))<br><span class="hljs-built_in">print</span>(heapq.nsmallest(<span class="hljs-number">3</span>, nums))<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">输出：</span><br><span class="hljs-string">[5, 4, 3]</span><br><span class="hljs-string">[1, 2, 3]</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure>

<p>这两个函数还接受一个key参数，用于dict或其他数据结构类型使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><span class="hljs-keyword">from</span> pprint <span class="hljs-keyword">import</span> pprint<br>portfolio = [<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;IBM&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">100</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">91.1</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;AAPL&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">50</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">543.22</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;FB&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">200</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">21.09</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;HPQ&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">35</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">31.75</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;YHOO&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">45</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">16.35</span>&#125;,<br>    &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;ACME&#x27;</span>, <span class="hljs-string">&#x27;shares&#x27;</span>: <span class="hljs-number">75</span>, <span class="hljs-string">&#x27;price&#x27;</span>: <span class="hljs-number">115.65</span>&#125;<br>]<br>cheap = heapq.nsmallest(<span class="hljs-number">3</span>, portfolio, key=<span class="hljs-keyword">lambda</span> s: s[<span class="hljs-string">&#x27;price&#x27;</span>])<br>expensive = heapq.nlargest(<span class="hljs-number">3</span>, portfolio, key=<span class="hljs-keyword">lambda</span> s: s[<span class="hljs-string">&#x27;price&#x27;</span>])<br>pprint(cheap)<br>pprint(expensive)<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">输出：</span><br><span class="hljs-string">[&#123;&#x27;name&#x27;: &#x27;YHOO&#x27;, &#x27;price&#x27;: 16.35, &#x27;shares&#x27;: 45&#125;,</span><br><span class="hljs-string"> &#123;&#x27;name&#x27;: &#x27;FB&#x27;, &#x27;price&#x27;: 21.09, &#x27;shares&#x27;: 200&#125;,</span><br><span class="hljs-string"> &#123;&#x27;name&#x27;: &#x27;HPQ&#x27;, &#x27;price&#x27;: 31.75, &#x27;shares&#x27;: 35&#125;]</span><br><span class="hljs-string">[&#123;&#x27;name&#x27;: &#x27;AAPL&#x27;, &#x27;price&#x27;: 543.22, &#x27;shares&#x27;: 50&#125;,</span><br><span class="hljs-string"> &#123;&#x27;name&#x27;: &#x27;ACME&#x27;, &#x27;price&#x27;: 115.65, &#x27;shares&#x27;: 75&#125;,</span><br><span class="hljs-string"> &#123;&#x27;name&#x27;: &#x27;IBM&#x27;, &#x27;price&#x27;: 91.1, &#x27;shares&#x27;: 100&#125;]</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-5-2-题目应用-寻找数据流中的中位数"><a href="#4-5-2-题目应用-寻找数据流中的中位数" class="headerlink" title="4.5.2 题目应用-寻找数据流中的中位数"></a>4.5.2 题目应用-寻找数据流中的中位数</h4><p>如何得到一个数据流中的中位数？如果从数据流中读出奇数个数值，那么中位数就是所有数值排序之后位于中间的数值。如果从数据流中读出偶数个数值，那么中位数就是所有数值排序之后中间两个数的平均值。</p>
<p>例如，</p>
<p>[2,3,4] 的中位数是 3</p>
<p>[2,3] 的中位数是 (2 + 3) &#x2F; 2 &#x3D; 2.5</p>
<p>设计一个支持以下两种操作的数据结构：</p>
<p>void addNum(int num) - 从数据流中添加一个整数到数据结构中。<br>double findMedian() - 返回目前所有元素的中位数。</p>
<p>示例1：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：<br>[&quot;MedianFinder&quot;,&quot;addNum&quot;,&quot;addNum&quot;,&quot;findMedian&quot;,&quot;addNum&quot;,&quot;findMedian&quot;]<br>[[],[1],[2],[],[3],[]]<br>输出：[null,null,null,1.50000,null,2.00000]<br></code></pre></td></tr></table></figure>

<p>示例2：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">输入：<br>[<span class="hljs-string">&quot;MedianFinder&quot;</span>,<span class="hljs-string">&quot;addNum&quot;</span>,<span class="hljs-string">&quot;findMedian&quot;</span>,<span class="hljs-string">&quot;addNum&quot;</span>,<span class="hljs-string">&quot;findMedian&quot;</span>]<br>[[],[<span class="hljs-number">2</span>],[],[<span class="hljs-number">3</span>],[]]<br>输出：[null,null,<span class="hljs-number">2.00000</span>,null,<span class="hljs-number">2.50000</span>]<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MedianFinder</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.queMin = <span class="hljs-built_in">list</span>()<br>        self.queMax = <span class="hljs-built_in">list</span>()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">addNum</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        queMin_ = self.queMin<br>        queMax_ = self.queMax<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> queMin_ <span class="hljs-keyword">or</span> num &lt;= -queMin_[<span class="hljs-number">0</span>]:<br>            heapq.heappush(queMin_, -num)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(queMax_) + <span class="hljs-number">1</span> &lt; <span class="hljs-built_in">len</span>(queMin_):<br>                heapq.heappush(queMax_, -heapq.heappop(queMin_))<br>        <span class="hljs-keyword">else</span>:<br>            heapq.heappush(queMax_, num)<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(queMax_) &gt; <span class="hljs-built_in">len</span>(queMin_):<br>                heapq.heappush(queMin_, -heapq.heappop(queMax_))<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMedian</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">float</span>:<br>        queMin_ = self.queMin<br>        queMax_ = self.queMax<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(queMin_) &gt; <span class="hljs-built_in">len</span>(queMax_):<br>            <span class="hljs-keyword">return</span> -queMin_[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">return</span> (-queMin_[<span class="hljs-number">0</span>] + queMax_[<span class="hljs-number">0</span>]) / <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<h3 id="4-6-SortedList"><a href="#4-6-SortedList" class="headerlink" title="4.6 SortedList"></a>4.6 SortedList</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 基础说明如下</span><br><span class="hljs-number">1.</span> 添加值<br>SortedList.add(value) <span class="hljs-comment"># 添加新元素，并排序。时间复杂度O(log(n)).</span><br>SortedList.update(iterable) <span class="hljs-comment"># 对添加的可迭代的所有元素排序。时间复杂度O(k*log(n)).</span><br><br><span class="hljs-number">2.</span> 移除值<br>SortedList.clear() <span class="hljs-comment"># 移除所有元素。时间复杂度O(n).</span><br>SortedList.discard(value) <span class="hljs-comment"># 移除一个值元素，如果元素不存在，不报错。时间复杂度O(log(n)).</span><br>SortedList.remove(value) <span class="hljs-comment"># 移除一个值元素，如果元素不存在，报错ValueError。时间复杂度O(log(n)).</span><br>SortedList.pop(index=-<span class="hljs-number">1</span>) <span class="hljs-comment"># 移除一个指定下标元素，如果有序序列为空或者下标超限，报错IndexError. 时间复杂度O(log(n))</span><br><br><span class="hljs-number">3.</span> 查找值<br>SortedList.bisect_left(value) <span class="hljs-comment"># 查找元素可以插入的位置下标，如果这个value已经存在，则插入已经存在的所有values之前（左侧）.时间复杂度O(log(n)).</span><br>SortedList.bisect_right(value) <span class="hljs-comment"># 查找元素可以插入的位置下标，如果这个value已经存在，则插入已经存在的所有values之后（右侧）。时间复杂度O(log(n))</span><br>SortedList.count(value) <span class="hljs-comment"># 查找元素出现的次数。时间复杂度O(log(n)).</span><br>SortedList.index(value, start=<span class="hljs-literal">None</span>, Stop=<span class="hljs-literal">None</span>) <span class="hljs-comment"># 查找索引范围[start,stop）内第一次出现value的索引，如果value不存在，报错ValueError. 时间复杂度O(log(n)).</span><br></code></pre></td></tr></table></figure>

<p>比较重要的特点是维护一个list的最大值和最小值，也就是SortedList中[0]和[-1]这样的索引</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sortedcontainers <span class="hljs-keyword">import</span> SortedList<br><br>sorted_list = SortedList([])<br><br>price = <span class="hljs-number">100</span><br>timestamp = <span class="hljs-number">0</span><br><br><span class="hljs-comment"># .add</span><br>sorted_list.add([price, timestamp])<br><br><span class="hljs-comment"># .discard</span><br>sorted_list.discard([prev_price, prev_timestamp])<br><br><span class="hljs-comment"># 对于字符串的字典序，该怎么反过来呢</span><br>尝试了很多方法，都没有找到太合适的答案，就是说我希望数字是升序的，字典序是反序的，甚至不知道在SortedList中是否是可以实现的<br>这里是一个TODO内容，希望能在未来找到答案，目前只建议用sortedList把数字都反过来，那么字符串的升序降序就相对的反过来了<br></code></pre></td></tr></table></figure>

<p>字符串的相关使用方法看这里</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sortedcontainers <span class="hljs-keyword">import</span> SortedList<br><br>sorted_list = SortedList([])<br><br>sorted_list.add([<span class="hljs-number">2</span>, <span class="hljs-string">&quot;a&quot;</span>])<br>sorted_list.add([<span class="hljs-number">1</span>, <span class="hljs-string">&quot;c&quot;</span>])<br>sorted_list.add([<span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>])<br><br><span class="hljs-built_in">print</span>(sorted_list)  <span class="hljs-comment"># SortedList([[1, &#x27;b&#x27;], [1, &#x27;c&#x27;], [2, &#x27;a&#x27;]])</span><br><br>sorted_list.discard([<span class="hljs-number">1</span>, <span class="hljs-string">&quot;c&quot;</span>])<br><span class="hljs-built_in">print</span>(sorted_list)  <span class="hljs-comment"># SortedList([[1, &#x27;b&#x27;], [2, &#x27;a&#x27;]])</span><br></code></pre></td></tr></table></figure>

<h3 id="4-7-并查集"><a href="#4-7-并查集" class="headerlink" title="4.7 并查集"></a>4.7 并查集</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 并查集的题目大部分比较明显</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_root</span>(<span class="hljs-params">a</span>):<br>    <span class="hljs-keyword">if</span> par[a] != a:<br>        par[a] = get_root(par[a])<br>    <span class="hljs-keyword">return</span> par[a]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">a, b</span>):<br>    p1, p2 = get_root(a), get_root(b)<br>    <span class="hljs-keyword">if</span> p1 == p2:<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># p2的parent是p1</span><br>        <span class="hljs-comment"># 如果涉及到每个group的值，还要把这里也累加上</span><br>        par[p2] = p1  <br><br><span class="hljs-comment"># 初始化自己的par都是自己</span><br>par = &#123;&#125;<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>    par[i] = i<br><br><span class="hljs-comment"># 两两merge</span><br><span class="hljs-comment"># pairs: [[0, 1], [1, 2], [3, 4], ...]</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(pairs)):<br>    merge(pairs[i][<span class="hljs-number">0</span>], pairs[i][<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure>

<h3 id="4-8-重定义类中的比较运算符"><a href="#4-8-重定义类中的比较运算符" class="headerlink" title="4.8 重定义类中的比较运算符"></a>4.8 重定义类中的比较运算符</h3><p>在python中似乎有</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tmp</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        1、对应如下</span><br><span class="hljs-string">        __lt__()、__le__()、__eq__()、__ne__()、__gt__()、__ge__()</span><br><span class="hljs-string">        &lt;、&lt;=、=、!=、&gt;、&gt;=</span><br><span class="hljs-string"></span><br><span class="hljs-string">        2、__ne__()会默认调用__eq__()，并对结果求反，因此定义了__eq__()就相当于定义了__ne__()</span><br><span class="hljs-string"></span><br><span class="hljs-string">        3、由于__lt__()与__ge__()互补，__le__()与__gt__()互补，故只需要定义__gt__()和__ge__()</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num, s</span>):<br>        self.num = num<br>        self.s =  s<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__eq__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">return</span> (self.num == other.num) <span class="hljs-keyword">and</span> (self.s == other.s)<br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__gt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        &gt;: 原来是大于</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> self.num == other.num:<br>            <span class="hljs-keyword">return</span> self.s &lt;= other.s<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> self.num &gt; other.num<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__ge__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        &gt;=: 原来是大于等于</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> self.num == other.num:<br>            <span class="hljs-keyword">return</span> self.s &lt; other.s<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> self.num &gt; other.num<br></code></pre></td></tr></table></figure>

<h2 id="5-图论常用算法"><a href="#5-图论常用算法" class="headerlink" title="5. 图论常用算法"></a>5. 图论常用算法</h2><h3 id="5-1-dijkstra"><a href="#5-1-dijkstra" class="headerlink" title="5.1 dijkstra"></a>5.1 dijkstra</h3><ul>
<li>Leetcode 1514. 概率最大的路径（只能保存一条路径）</li>
</ul>
<p>给你一个由 n 个节点（下标从 0 开始）组成的无向加权图，该图由一个描述边的列表组成，其中 edges[i] &#x3D; [a, b] 表示连接节点 a 和 b 的一条无向边，且该边遍历成功的概率为 succProb[i] 。</p>
<p>指定两个节点分别作为起点 start 和终点 end ，请你找出从起点到终点成功概率最大的路径，并返回其成功概率。</p>
<p>如果不存在从 start 到 end 的路径，请 返回 0 。只要答案与标准答案的误差不超过 1e-5 ，就会被视作正确答案。</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233005521.png" srcset="/img/loading.gif" lazyload alt="image-20221029233005521" style="zoom:80%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233023988.png" srcset="/img/loading.gif" lazyload alt="image-20221029233023988" style="zoom:80%;" />

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxProbability</span>(<span class="hljs-params">self, n, edges, succProb, start, end</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type n: int</span><br><span class="hljs-string">        :type edges: List[List[int]]</span><br><span class="hljs-string">        :type succProb: List[float]</span><br><span class="hljs-string">        :type start: int</span><br><span class="hljs-string">        :type end: int</span><br><span class="hljs-string">        :rtype: float</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br>        <span class="hljs-keyword">import</span> heapq<br><br>        <span class="hljs-comment"># 邻接表（这里用dict可以默认为邻接表了）</span><br>        d = defaultdict(<span class="hljs-built_in">dict</span>)<br>        <span class="hljs-keyword">for</span> i, prob <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(succProb):<br>            x, y = edges[i]<br>            d[x][y] = prob<br>            d[y][x] = prob<br><br>        <span class="hljs-comment"># dijkstra</span><br>        stack = [[-<span class="hljs-number">1</span>, start]]  <span class="hljs-comment"># 这里-1就是大根堆的意思，这个题要求走最大的路径，负数越大越小所以可以dijkstra</span><br>        heapq.heapify(stack)<br>        visit = <span class="hljs-built_in">set</span>()  <span class="hljs-comment"># vis</span><br><br>        path = []<br>        <span class="hljs-keyword">while</span> stack:<br>            <span class="hljs-comment"># 取出来节点</span><br>            prob, i = heapq.heappop(stack)<br>            <br>            <span class="hljs-comment"># 如果已经是结尾，则返回；如果是其他题或许可以魔改这里</span><br>            <span class="hljs-keyword">if</span> i == end:<br>                path.append(i)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;path: &quot;</span>, path)<br>                <span class="hljs-keyword">return</span> -prob<br><br>            <span class="hljs-comment"># 如果被访问过，就不走</span><br>            <span class="hljs-keyword">if</span> i <span class="hljs-keyword">in</span> visit:<br>                <span class="hljs-keyword">continue</span><br>            <br>            <span class="hljs-comment"># 加入vis</span><br>            visit.add(i)<br>            path.append(i)<br>            <br>            <span class="hljs-comment"># 每次都从最大的开始走</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> d[i]:<br>                heapq.heappush(stack, [prob*d[i][j], j])<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;path: &quot;</span>, path)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<ul>
<li>TODO，未来有机会把下面这个翻译成python了</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45745854/article/details/126264026?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~YuanLiJiHua~Position-1-126264026-blog-125927568.pc_relevant_landingrelevant&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~YuanLiJiHua~Position-1-126264026-blog-125927568.pc_relevant_landingrelevant&amp;utm_relevant_index=1">https://blog.csdn.net/weixin_45745854/article/details/126264026?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-1-126264026-blog-125927568.pc_relevant_landingrelevant&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EYuanLiJiHua%7EPosition-1-126264026-blog-125927568.pc_relevant_landingrelevant&amp;utm_relevant_index=1</a></p>
<h3 id="5-2-最小生成树Kruscal-amp-Prim"><a href="#5-2-最小生成树Kruscal-amp-Prim" class="headerlink" title="5.2 最小生成树Kruscal&amp;Prim"></a>5.2 最小生成树Kruscal&amp;Prim</h3><p>最小生成树可能需要用并查集来实现</p>
<ul>
<li>Kruscal</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">x</span>):                          <span class="hljs-comment">#寻找节点的根节点</span><br>    <span class="hljs-keyword">if</span>(x!=p[x]):<br>        p[x]=find(p[x])<br>    <span class="hljs-keyword">return</span> p[x]<br>n,m=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())          <span class="hljs-comment">#n为节点个数，m为边的个数</span><br>edges=[]<br>a=[]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):                    <span class="hljs-comment">#有m条边循环m次</span><br>    a,b,c=<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())    <span class="hljs-comment">#输入两个节点，以及对应的权值</span><br>    edges.append([a,b,c])             <span class="hljs-comment">#将每条边储存在列表中</span><br>edges=<span class="hljs-built_in">sorted</span>(edges,key=<span class="hljs-keyword">lambda</span> x:x[<span class="hljs-number">2</span>]) <span class="hljs-comment">#以列表元素的第三个元素，也就是边的权值为依据进行排序</span><br>res=<span class="hljs-number">0</span>                                 <span class="hljs-comment">#权值的和起始值为0</span><br>cnt=<span class="hljs-number">0</span><br>p=[i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]             <span class="hljs-comment">#初始化,每个节点是孤立的,即父节点是自己</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>    a=edges[i][<span class="hljs-number">0</span>]<br>    b=edges[i][<span class="hljs-number">1</span>]<br>    w=edges[i][<span class="hljs-number">2</span>]<br>    a=find(a)                         <span class="hljs-comment">#a的根节点</span><br>    b=find(b)                         <span class="hljs-comment">#b的根节点</span><br>    <span class="hljs-keyword">if</span>(a!=b):                         <span class="hljs-comment">#如果a的根节点不等于b的根节点,满足条件</span><br>        res+=w                        <span class="hljs-comment">#权值相加</span><br>        cnt+=<span class="hljs-number">1</span>                        <span class="hljs-comment">#计数器(目前已连接边的数量)加一</span><br>        p[a]=b<br><span class="hljs-keyword">if</span>(cnt&lt;n-<span class="hljs-number">1</span>):                          <span class="hljs-comment">#n个点必须有n-1条边</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;impossible&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure>

<h3 id="5-3-DFS-Lake-Counting类"><a href="#5-3-DFS-Lake-Counting类" class="headerlink" title="5.3 DFS - Lake Counting类"></a>5.3 DFS - Lake Counting类</h3><ul>
<li>Leetcode200. 岛屿数量</li>
</ul>
<p>给你一个由<code>&quot;1&quot;</code>（陆地）和<code>&quot;0&quot;</code>水组成的二维网格，请你计算网格中岛屿的数量。</p>
<p>岛屿总是被水包围，并且每座岛屿只能由水平方向和&#x2F;或竖直方向上相邻的陆地连接形成</p>
<p>此外，你可以假设网格的四条边被水包围。</p>
<p>示例1：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：grid = [<br>  [&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;1&quot;,&quot;0&quot;],<br>  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;],<br>  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],<br>  [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;]<br>]<br>输出：1<br></code></pre></td></tr></table></figure>

<p>示例2：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：grid = [<br>  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],<br>  [&quot;1&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;,&quot;0&quot;],<br>  [&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;0&quot;,&quot;0&quot;],<br>  [&quot;0&quot;,&quot;0&quot;,&quot;0&quot;,&quot;1&quot;,&quot;1&quot;]<br>]<br>输出：3<br></code></pre></td></tr></table></figure>

<p>数据范围</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">m == grid.length<br>n == grid[i].length<br>1 &lt;= m, n &lt;= 300<br>grid[i][j] 的值为 &#x27;0&#x27; 或 &#x27;1&#x27;<br></code></pre></td></tr></table></figure>

<p>解答</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numIslands</span>(<span class="hljs-params">self, grid: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <br>        dx = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br>        dy = [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]<br>        m = <span class="hljs-built_in">len</span>(grid)<br>        n = <span class="hljs-built_in">len</span>(grid[<span class="hljs-number">0</span>])<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>            grid[x][y] = <span class="hljs-string">&quot;0&quot;</span><br><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br>                nx = x + dx[i]<br>                ny = y + dy[i]<br>				<br>                <span class="hljs-comment"># 注意这里</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= nx &lt; m <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= ny &lt; n <span class="hljs-keyword">and</span> grid[nx][ny] == <span class="hljs-string">&quot;1&quot;</span>:<br>                    dfs(nx, ny)<br><br>            <span class="hljs-keyword">return</span><br>        <br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-keyword">if</span> grid[i][j] == <span class="hljs-string">&quot;1&quot;</span>:<br>                    dfs(i, j)<br>                    res += <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>

<h3 id="5-4-DFS-硬暴力类（Codeforces1646C）"><a href="#5-4-DFS-硬暴力类（Codeforces1646C）" class="headerlink" title="5.4 DFS - 硬暴力类（Codeforces1646C）"></a>5.4 DFS - 硬暴力类（Codeforces1646C）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">题目大意：</span><br><span class="hljs-string">C. Factorials and Powers of Two：阶乘和2的幂</span><br><span class="hljs-string"></span><br><span class="hljs-string">一个数字被称作是powerful的，如果他是【某个数的阶乘】或【2的幂】。换句话来说，如果数字m是powerful的，那么就是存在一个d，使得 m=2^d 或者 m=d!（0!=1）。</span><br><span class="hljs-string"></span><br><span class="hljs-string">举例来说，1，4，6是powerful的，因为1，6分别是1，3的阶乘；4是2的2次方；；7，10，18不是powerful的；</span><br><span class="hljs-string"></span><br><span class="hljs-string">给定一个正整数n，找到最小的k，使得n可以被表示为k个各不相同powerful number的和。</span><br><span class="hljs-string"></span><br><span class="hljs-string">输入：</span><br><span class="hljs-string">输入包含多组数据，第一行代表数据的组数t，之后每一行有一个数字n（1&lt;=n&lt;=10^12）；</span><br><span class="hljs-string">4</span><br><span class="hljs-string">7</span><br><span class="hljs-string">11</span><br><span class="hljs-string">240</span><br><span class="hljs-string">17179869184</span><br><span class="hljs-string"></span><br><span class="hljs-string">输出：</span><br><span class="hljs-string">如果表示不了，输出-1；否则输出最小的k值；</span><br><span class="hljs-string">2</span><br><span class="hljs-string">3</span><br><span class="hljs-string">4</span><br><span class="hljs-string">1</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># 阶乘预处理，存储1-14的阶乘，用dp的思路一次遍历</span><br>f = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">15</span>)]<br>f[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">15</span>):<br>    f[i] = i * f[i-<span class="hljs-number">1</span>]<br><br><span class="hljs-comment"># 统计二进制中1的个数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count_one_num</span>(<span class="hljs-params">num</span>):<br>    cnt = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> num &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">if</span> num &amp; <span class="hljs-number">1</span> == <span class="hljs-number">1</span>:<br>            cnt += <span class="hljs-number">1</span><br>        num &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> cnt<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cf1646C</span>(<span class="hljs-params">self, n</span>):<br>        <span class="hljs-keyword">global</span> res<br>        res = <span class="hljs-number">1e9</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">now_k, now_sum, pos</span>):  <span class="hljs-comment"># 当前的选择数字数目，当前的加和值，当前的f[pos]角标</span><br>            <span class="hljs-keyword">global</span> res<br>            <span class="hljs-keyword">if</span> now_sum &gt; n:<br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span> pos == <span class="hljs-number">15</span>:<br>                res = <span class="hljs-built_in">min</span>(res, now_k+count_one_num(n-now_sum))<br>                <span class="hljs-keyword">return</span><br><br>            <span class="hljs-comment"># 选择</span><br>            dfs(now_k+<span class="hljs-number">1</span>, now_sum+f[pos], pos+<span class="hljs-number">1</span>)<br><br>            <span class="hljs-comment"># 不选</span><br>            dfs(now_k, now_sum, pos+<span class="hljs-number">1</span>)<br><br>        dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    t = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    S = Solution()<br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(t):<br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>        res = S.cf1646C(n)<br>        <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure>

<h3 id="5-5-BFS-迷宫"><a href="#5-5-BFS-迷宫" class="headerlink" title="5.5 BFS - 迷宫"></a>5.5 BFS - 迷宫</h3><h4 id="5-5-1-基础版迷宫"><a href="#5-5-1-基础版迷宫" class="headerlink" title="5.5.1 基础版迷宫"></a>5.5.1 基础版迷宫</h4><p>当你站在一个迷宫里的时候，往往会被错综复杂的道路弄得失去方向感，如果你能得到迷宫地图，事情就会变得非常简单。<br>假设你已经得到了一个n*m的迷宫的图纸，请你找出从起点到出口的最短路。</p>
<p>第一行是两个整数n和m(1&lt;&#x3D;n,m&lt;&#x3D;100)，表示迷宫的行数和列数。<br>接下来n行，每行一个长为m的字符串，表示整个迷宫的布局。字符’.’表示空地，’#’表示墙，’S’表示起点,’T’表示出口。</p>
<p>输出从起点到出口最少需要走的步数。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">输入</span><br>3 3<br><span class="hljs-meta prompt_">S#</span><span class="language-bash">T</span><br>.#.<br>...<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出</span><br>6<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">105</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">10005</span>;<br><span class="hljs-type">char</span> maze[MAXN][MAXN];<br><span class="hljs-type">int</span> d[MAXN][MAXN];<br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><span class="hljs-type">int</span> n,m;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>	<span class="hljs-type">int</span> x,y;<br>	<span class="hljs-built_in">node</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)<br>	&#123;<br>		x = a;<br>		y = b;<br>	&#125;<br>	<span class="hljs-built_in">node</span>()&#123;&#125;<br>&#125;;<br>node s,t;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bfs</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	queue &lt;node&gt; que;<br>	que.<span class="hljs-built_in">push</span>(s);<br>	d[s.x][s.y] = <span class="hljs-number">0</span>;<br>	<span class="hljs-keyword">while</span>(que.<span class="hljs-built_in">size</span>())<br>	&#123;<br>		node temp = que.<span class="hljs-built_in">front</span>();<br>		que.<span class="hljs-built_in">pop</span>();<br>		<span class="hljs-keyword">if</span>(temp.x==t.x&amp;&amp;temp.y==t.y)	<span class="hljs-keyword">break</span>;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)<br>		&#123;<br>			<span class="hljs-type">int</span> nx = temp.x + dx[i];<br>			<span class="hljs-type">int</span> ny = temp.y + dy[i];<br>			<span class="hljs-keyword">if</span>(nx&gt;=<span class="hljs-number">0</span>&amp;&amp;nx&lt;n&amp;&amp;ny&gt;=<span class="hljs-number">0</span>&amp;&amp;ny&lt;m&amp;&amp;maze[nx][ny]!=<span class="hljs-string">&#x27;#&#x27;</span>&amp;&amp;d[nx][ny]==INF) <br>			&#123;<br>				d[nx][ny] = d[temp.x][temp.y] + <span class="hljs-number">1</span>;<br>				que.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(nx,ny));<br>			&#125;<br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">return</span> d[t.x][t.y];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);<br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>	&#123;<br>		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,maze[i]);<br>	&#125;<br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>	&#123;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++)<br>		&#123;<br>			d[i][j] = INF;<br>			<span class="hljs-keyword">if</span>(maze[i][j]==<span class="hljs-string">&#x27;S&#x27;</span>)	s = <span class="hljs-built_in">node</span>(i,j);<br>			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(maze[i][j]==<span class="hljs-string">&#x27;T&#x27;</span>)t = <span class="hljs-built_in">node</span>(i,j);<br>		&#125;<br>	&#125;<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,<span class="hljs-built_in">bfs</span>());<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5-5-2-迷宫-鸣人和佐助"><a href="#5-5-2-迷宫-鸣人和佐助" class="headerlink" title="5.5.2 迷宫-鸣人和佐助"></a>5.5.2 迷宫-鸣人和佐助</h4><p>已知一张地图（以二维矩阵的形式表示）以及佐助和鸣人的位置。地图上的每个位置都可以走到，只不过有些位置上有大蛇丸的手下，需要先打败大蛇丸的手下才能到这些位置。鸣人有一定数量的查克拉，每一个单位的查克拉可以打败一个大蛇丸的手下。假设鸣人可以往上下左右四个方向移动，每移动一个距离需要花费1个单位时间，打败大蛇丸的手下不需要时间。如果鸣人查克拉消耗完了，则只可以走到没有大蛇丸手下的位置，不可以再移动到有大蛇丸手下的位置。佐助在此期间不移动，大蛇丸的手下也不移动。请问，鸣人要追上佐助最少需要花费多少时间？</p>
<p>输入的第一行包含三个整数：M，N，T。代表M行N列的地图和鸣人初始的查克拉数量T。0 &lt; M,N &lt; 200，0 ≤ T &lt; 10<br>后面是M行N列的地图，其中@代表鸣人，+代表佐助。*代表通路，#代表大蛇丸的手下。</p>
<p>输出包含一个整数R，代表鸣人追上佐助最少需要花费的时间。如果鸣人无法追上佐助，则输出-1。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">样例输入1</span><br>4 4 1<br><span class="hljs-meta prompt_">#</span><span class="language-bash">@<span class="hljs-comment">##</span></span><br>**##<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">##+</span></span><br>****<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">样例输出1</span><br>6<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">样例输入2</span><br>4 4 2<br><span class="hljs-meta prompt_">#</span><span class="language-bash">@<span class="hljs-comment">##</span></span><br>**##<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">##+</span></span><br>****<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">样例输出2</span><br>4<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> m,n,t;<br><span class="hljs-type">char</span> mp[<span class="hljs-number">205</span>][<span class="hljs-number">205</span>];<br><span class="hljs-type">int</span> vis[<span class="hljs-number">205</span>][<span class="hljs-number">205</span>];<br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>	<span class="hljs-type">int</span> x;<br>	<span class="hljs-type">int</span> y;<br>	<span class="hljs-type">int</span> chakela;<br>	<span class="hljs-type">int</span> step;<br>	<span class="hljs-built_in">node</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b,<span class="hljs-type">int</span> c,<span class="hljs-type">int</span> d)<br>	&#123;<br>		x = a;<br>		y = b;<br>		chakela = c;<br>		step = d;<br>	&#125;<br>	<span class="hljs-built_in">node</span>()&#123;&#125;<br>	<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> node &amp;a) <span class="hljs-type">const</span> <span class="hljs-comment">//按照查克拉最小值优先 结构体优先队列 </span><br>	&#123;<br>		<span class="hljs-keyword">if</span>(a.step==step)<br>		&#123;<br>			<span class="hljs-keyword">return</span> a.chakela&lt;chakela;<span class="hljs-comment">//路径相同情况下 查克拉消耗小的优先 </span><br>		&#125;<br>		<span class="hljs-keyword">else</span><br>			<span class="hljs-keyword">return</span> a.step&lt;step; <br>	&#125;<br>&#125;s,tt,temp;<br>priority_queue &lt;node&gt; pq;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	pq.<span class="hljs-built_in">push</span>(s);<br>	vis[s.x][s.y] = <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">while</span>(pq.<span class="hljs-built_in">size</span>())<br>	&#123;<br>		temp = pq.<span class="hljs-built_in">top</span>();<br>		pq.<span class="hljs-built_in">pop</span>();<br>		<span class="hljs-keyword">if</span>(temp.x==tt.x&amp;&amp;temp.y==tt.y)<br>		&#123;<br>			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,temp.step);<br>			<span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>) ;<br>		&#125; <br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)<br>		&#123;<br>			<span class="hljs-type">int</span> nx = temp.x+dx[i];<br>			<span class="hljs-type">int</span> ny = temp.y+dy[i];<br>			<span class="hljs-keyword">if</span>(nx&gt;=<span class="hljs-number">0</span>&amp;&amp;nx&lt;m&amp;&amp;ny&gt;=<span class="hljs-number">0</span>&amp;&amp;ny&lt;n&amp;&amp;vis[nx][ny]==<span class="hljs-number">0</span>)<span class="hljs-comment">//消耗的查克拉需要能走到 </span><br>			&#123;<br>				<span class="hljs-keyword">if</span>(mp[nx][ny]==<span class="hljs-string">&#x27;#&#x27;</span>&amp;&amp;temp.chakela+<span class="hljs-number">1</span>&lt;=t)<br>				&#123;<br>					pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(nx,ny,temp.chakela+<span class="hljs-number">1</span>,temp.step+<span class="hljs-number">1</span>));<br>					vis[nx][ny] = <span class="hljs-number">1</span>;<br>				&#125;<br>				<span class="hljs-keyword">if</span>(mp[nx][ny]==<span class="hljs-string">&#x27;*&#x27;</span>&amp;&amp;temp.chakela&lt;=t)<br>				&#123;<br>					pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(nx,ny,temp.chakela,temp.step+<span class="hljs-number">1</span>));<br>					vis[nx][ny] = <span class="hljs-number">1</span>;<br>				&#125;<br>				<span class="hljs-keyword">if</span>(mp[nx][ny]==<span class="hljs-string">&#x27;+&#x27;</span>&amp;&amp;temp.chakela&lt;=t)<br>				&#123;<br>					pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">node</span>(nx,ny,temp.chakela,temp.step+<span class="hljs-number">1</span>));<br>					vis[nx][ny] = <span class="hljs-number">1</span>;	<br>				&#125; 	<br>			&#125;  <br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">return</span> ;<br>&#125; <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">memset</span>(vis,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(vis));<br>	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>,&amp;m,&amp;n,&amp;t);<span class="hljs-comment">//m行n列 且一开始拥有的查克拉数量为t</span><br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>	&#123;<br>		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>,mp[i]);<br>	&#125;<br>	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)<br>	&#123;<br>		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++)<br>		&#123;<br>			<span class="hljs-keyword">if</span>(mp[i][j]==<span class="hljs-string">&#x27;@&#x27;</span>)<br>			&#123; <br>				s = <span class="hljs-built_in">node</span>(i,j,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<span class="hljs-comment">//找到一个起始点 </span><br>			&#125;<br>			<span class="hljs-keyword">if</span>(mp[i][j]==<span class="hljs-string">&#x27;+&#x27;</span>)<br>			&#123;<br>				tt = <span class="hljs-built_in">node</span>(i,j,t,<span class="hljs-number">0</span>);<span class="hljs-comment">//这里似乎只有ij是有用的 </span><br>			&#125; <br>		&#125;<br>	&#125;<br>	<span class="hljs-built_in">bfs</span>();<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<br>&#125; <br></code></pre></td></tr></table></figure>

<h4 id="5-5-3-迷宫-鸣人和佐助python题目Leetcode1293-网格中的最短路径"><a href="#5-5-3-迷宫-鸣人和佐助python题目Leetcode1293-网格中的最短路径" class="headerlink" title="5.5.3 迷宫-鸣人和佐助python题目Leetcode1293. 网格中的最短路径"></a>5.5.3 迷宫-鸣人和佐助python题目Leetcode1293. 网格中的最短路径</h4><p>给你一个 m * n 的网格，其中每个单元格不是 0（空）就是 1（障碍物）。每一步，您都可以在空白单元格中上、下、左、右移动。</p>
<p>如果您 最多 可以消除 k 个障碍物，请找出从左上角 (0, 0) 到右下角 (m-1, n-1) 的最短路径，并返回通过该路径所需的步数。如果找不到这样的路径，则返回 -1 。</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234434965.png" srcset="/img/loading.gif" lazyload alt="image-20221029234434965" style="zoom:80%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234446218.png" srcset="/img/loading.gif" lazyload alt="image-20221029234446218" style="zoom:80%;" />



<ul>
<li><p><code>grid.length == m</code></p>
</li>
<li><p><code>grid[0].length == n</code></p>
</li>
<li><p><code>1 &lt;= m, n &lt;= 40</code></p>
</li>
<li><p><code>1 &lt;= k &lt;= m*n</code></p>
</li>
<li><p><code>grid[i][j] 是 0 或 1</code></p>
</li>
<li><p><code>grid[0][0] == grid[m-1][n-1] == 0</code></p>
</li>
</ul>
<p>方法一：广度优先搜索<br>对于二维网格中的最短路问题，我们一般可以使用广度优先搜索 + 队列的方法解决。</p>
<p>本题中，玩家在移动时可以消除障碍物，这会导致网格的结构发生变化，看起来我们需要在广度优先搜索时额外存储网格的变化。但实际上，由于玩家在最短路中显然不会经过同一位置超过一次，因此最多消除 k 个障碍物等价于最多经过 k 个障碍物。</p>
<p>这样我们就可以使用三元组 (x, y, rest) 表示一个搜索状态，其中 (x, y) 表示玩家的位置，rest 表示玩家还可以经过 rest 个障碍物，它的值必须为非负整数。对于当前的状态 (x, y, rest)，它可以向最多四个新状态进行搜索，即将玩家 (x, y) 向四个方向移动一格。假设移动的方向为 (dx, dy)，那么玩家的新位置为 (mx + dx, my + dy)。如果该位置为障碍物，那么新的状态为 (mx + dx, my + dy, rest - 1)，否则新的状态为 (mx + dx, my + dy, rest)。我们从初始状态 (0, 0, k) 开始搜索，当我们第一次到达状态 (m - 1, n - 1, k’)，其中 k’ 是任意非负整数时，就得到了从左上角 (0, 0) 到右下角 (m - 1, n - 1) 且最多经过 k 个障碍物的最短路径。</p>
<p>此外，我们还可以对搜索空间进行优化。注意到题目中 k 的上限为 m * n，但考虑一条从 (0, 0) 向下走到 (m - 1, 0) 再向右走到 (m - 1, n - 1) 的路径，它经过了 m + n - 1 个位置，其中起点 (0, 0) 和终点 (m - 1, n - 1) 没有障碍物，那么这条路径上最多只会有 m + n - 3 个障碍物。因此我们可以将 k 的值设置为 m + n - 3 与其本身的较小值 min(k, m + n - 3)，将广度优先搜索的时间复杂度从 O(MNK)O(MNK) 降低至 O(MN * \min(M + N, K))O(MN∗min(M+N,K))。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">shortestPath</span>(<span class="hljs-params">self, grid: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        m, n = <span class="hljs-built_in">len</span>(grid), <span class="hljs-built_in">len</span>(grid[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">if</span> m == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> n == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <br>        k = <span class="hljs-built_in">min</span>(k, m + n - <span class="hljs-number">3</span>)<br>        visited = <span class="hljs-built_in">set</span>([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, k)])<br>        q = collections.deque([(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, k)])<br><br>        step = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(q) &gt; <span class="hljs-number">0</span>:<br>            step += <span class="hljs-number">1</span><br>            cnt = <span class="hljs-built_in">len</span>(q)<br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cnt):<br>                x, y, rest = q.popleft()<br>                <span class="hljs-keyword">for</span> dx, dy <span class="hljs-keyword">in</span> [(-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)]:<br>                    nx, ny = x + dx, y + dy<br>                    <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= nx &lt; m <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= ny &lt; n:<br>                        <span class="hljs-keyword">if</span> grid[nx][ny] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (nx, ny, rest) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> visited:<br>                            <span class="hljs-keyword">if</span> nx == m - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> ny == n - <span class="hljs-number">1</span>:<br>                                <span class="hljs-keyword">return</span> step<br>                            q.append((nx, ny, rest))<br>                            visited.add((nx, ny, rest))<br>                        <span class="hljs-keyword">elif</span> grid[nx][ny] == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> rest &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (nx, ny, rest - <span class="hljs-number">1</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> visited:<br>                            q.append((nx, ny, rest - <span class="hljs-number">1</span>))<br>                            visited.add((nx, ny, rest - <span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<h3 id="5-6-拓扑排序"><a href="#5-6-拓扑排序" class="headerlink" title="5.6 拓扑排序"></a>5.6 拓扑排序</h3><p>简化题目要求：给定<code>colConditions = [[2, 1], [3, 2]]</code>，代表2要在1的左边，3要在2的左边，然后给出任意一个满足这样条件排序</p>
<p>这里本质上是一个指向问题，对于这种入度出度的指向问题，可以看做一种拓扑排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> collections<br><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br><br>colConditions = [[<span class="hljs-number">2</span>, <span class="hljs-number">1</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>]]<br>k = <span class="hljs-number">3</span><br><br><br>edges=collections.defaultdict(<span class="hljs-built_in">list</span>)<br><br><span class="hljs-comment">#存储当前每个节点的入度</span><br>indegree=[<span class="hljs-number">0</span>]*k  <span class="hljs-comment"># 一共最多k个节点</span><br><br><span class="hljs-comment">#遍历赋予初始值</span><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> colConditions:<br>    edges[item[<span class="hljs-number">0</span>]-<span class="hljs-number">1</span>].append(item[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span>)<br>    indegree[item[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span>]+=<span class="hljs-number">1</span><br><br><span class="hljs-comment">#找到当前入度为0的节点</span><br><span class="hljs-comment"># queen=collections.deque([u for u in range(numCourses) if indegree[u] == 0])</span><br>queen=deque()<br><span class="hljs-comment"># for u in indegree</span><br><span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k):<br>    <span class="hljs-keyword">if</span> indegree[u]==<span class="hljs-number">0</span>:<br>        queen.append(u)<br>visited = <span class="hljs-number">0</span><br>res_col = []<br><span class="hljs-keyword">while</span> queen:<br>    visited +=<span class="hljs-number">1</span><br>    pre=queen.popleft()<br>    res_col.append(pre+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> cur <span class="hljs-keyword">in</span> edges[pre]:<br>        indegree[cur]-=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> indegree[cur]==<span class="hljs-number">0</span>:<br>            queen.append(cur)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;res_col: &quot;</span>, res_col)  <span class="hljs-comment"># [3, 2, 1]</span><br></code></pre></td></tr></table></figure>

<h3 id="5-7-记忆化搜索"><a href="#5-7-记忆化搜索" class="headerlink" title="5.7 记忆化搜索"></a>5.7 记忆化搜索</h3><h4 id="5-7-1-Leetcode2435-矩阵中和能被K整除的路径"><a href="#5-7-1-Leetcode2435-矩阵中和能被K整除的路径" class="headerlink" title="5.7.1 Leetcode2435. 矩阵中和能被K整除的路径"></a>5.7.1 Leetcode2435. 矩阵中和能被K整除的路径</h4><p>给你一个下标从 0 开始的 m x n 整数矩阵 grid 和一个整数 k 。你从起点 (0, 0) 出发，每一步只能往 下 或者往 右 ，你想要到达终点 (m - 1, n - 1) 。</p>
<p>请你返回路径和能被 k 整除的路径数目，由于答案可能很大，返回答案对 109 + 7 取余 的结果</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233319005.png" srcset="/img/loading.gif" lazyload alt="image-20221029233319005" style="zoom:80%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233328194.png" srcset="/img/loading.gif" lazyload alt="image-20221029233328194" style="zoom:80%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029233336441.png" srcset="/img/loading.gif" lazyload alt="image-20221029233336441" style="zoom:80%;" />

<p>数据范围</p>
<ul>
<li><p><code>m == grid.length</code></p>
</li>
<li><p><code>n == grid[i].length</code></p>
</li>
<li><p><code>1 &lt;= m, n &lt;= 5 * 10^4</code></p>
</li>
<li><p><code>1 &lt;= m * n &lt;= 5 * 10^4</code></p>
</li>
<li><p><code>0 &lt;= grid[i][j] &lt;= 100</code></p>
</li>
<li><p><code>1 &lt;= k &lt;= 50</code></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">记忆化搜索题目的思路</span><br><span class="hljs-string"></span><br><span class="hljs-string">整除 -&gt; 路径和对k取模，这里注意到k很小，所以可以O(mnk)，把取模结果当成状态中的一部分</span><br><span class="hljs-string">(i, j, v)是我们的状态，走到(ij)位置处，当前路径和模k，结果为v时，符合题目条件的路径个数</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>MOD = <span class="hljs-number">10</span> ** <span class="hljs-number">9</span> + <span class="hljs-number">7</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numberOfPaths</span>(<span class="hljs-params">self, grid: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br><br>        n, m = <span class="hljs-built_in">len</span>(grid), <span class="hljs-built_in">len</span>(grid[<span class="hljs-number">0</span>])<br><br>        <span class="hljs-comment"># 记忆化搜索</span><br><span class="hljs-meta">        @cache</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">i: <span class="hljs-built_in">int</span>, j: <span class="hljs-built_in">int</span>, v: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>            <span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> j &lt; <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            <br>            v = (v + grid[i][j]) % k<br>            <br>            <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> j == <span class="hljs-number">0</span>:  <span class="hljs-comment"># 记忆化搜索的原点套路，代表从0到这个位置</span><br>                <span class="hljs-keyword">if</span> v == <span class="hljs-number">0</span>:<br>                   <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br>            <span class="hljs-keyword">return</span> (dfs(i-<span class="hljs-number">1</span>, j, v) + dfs(i, j-<span class="hljs-number">1</span>, v)) % MOD<br>        <br>        res = dfs(n-<span class="hljs-number">1</span>, m-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<br>        dfs.cache_clear()  <span class="hljs-comment"># 容易爆内存</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>

<h4 id="5-7-2-Leetcode2267-检查是否有合法括号字符串路径"><a href="#5-7-2-Leetcode2267-检查是否有合法括号字符串路径" class="headerlink" title="5.7.2 Leetcode2267. 检查是否有合法括号字符串路径"></a>5.7.2 Leetcode2267. 检查是否有合法括号字符串路径</h4><p>一个括号字符串是一个 非空 且只包含 ‘(‘ 和 ‘)’ 的字符串。如果下面 任意 条件为 真 ，那么这个括号字符串就是 合法的 。</p>
<p>​	字符串是 () 。<br>​	字符串可以表示为 AB（A 连接 B），A 和 B 都是合法括号序列。<br>​	字符串可以表示为 (A) ，其中 A 是合法括号序列。</p>
<p>给你一个 m x n 的括号网格图矩阵 grid 。网格图中一个 合法括号路径 是满足以下所有条件的一条路径：</p>
<p>​	路径开始于左上角格子 (0, 0) 。<br>​	路径结束于右下角格子 (m - 1, n - 1) 。<br>​	路径每次只会向 下 或者向 右 移动。<br>​	路径经过的格子组成的括号字符串是 合法 的。<br>如果网格图中存在一条 合法括号路径 ，请返回 true ，否则返回 false 。</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234033703.png" srcset="/img/loading.gif" lazyload alt="image-20221029234033703" style="zoom:80%;" />

<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234043801.png" srcset="/img/loading.gif" lazyload alt="image-20221029234043801" style="zoom:80%;" />

<ul>
<li><p><code>m == grid.length</code></p>
</li>
<li><p><code>n == grid[i].length</code></p>
</li>
<li><p><code>1 &lt;= m, n &lt;= 100</code></p>
</li>
<li><p><code>grid[i][j] 要么是 &#39;(&#39; ，要么是 &#39;)&#39; 。</code></p>
</li>
</ul>
<p>解答：</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234147392.png" srcset="/img/loading.gif" lazyload alt="image-20221029234147392" style="zoom:80%;" />

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">hasValidPath</span>(<span class="hljs-params">self, grid: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        m, n = <span class="hljs-built_in">len</span>(grid), <span class="hljs-built_in">len</span>(grid[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">if</span> (m + n) % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> grid[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">or</span> grid[m - <span class="hljs-number">1</span>][n - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;(&#x27;</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># 剪枝</span><br><br><span class="hljs-meta">        @cache  </span><span class="hljs-comment"># 效果类似 vis 数组</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span>, c: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>            <span class="hljs-keyword">if</span> c &gt; m - x + n - y - <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>  <span class="hljs-comment"># 剪枝：即使后面都是 &#x27;)&#x27; 也不能将 c 减为 0</span><br>            <span class="hljs-keyword">if</span> x == m - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y == n - <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> c == <span class="hljs-number">1</span>  <span class="hljs-comment"># 终点一定是 &#x27;)&#x27;</span><br>            c += <span class="hljs-number">1</span> <span class="hljs-keyword">if</span> grid[x][y] == <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> c &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> (x &lt; m - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> dfs(x + <span class="hljs-number">1</span>, y, c) <span class="hljs-keyword">or</span> y &lt; n - <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> dfs(x, y + <span class="hljs-number">1</span>, c))  <span class="hljs-comment"># 往下或者往右</span><br>        <span class="hljs-keyword">return</span> dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># 起点</span><br></code></pre></td></tr></table></figure>

<h2 id="6-字符串"><a href="#6-字符串" class="headerlink" title="6. 字符串"></a>6. 字符串</h2><h3 id="6-1-KMP算法-x2F-正则表达式相关函数的使用"><a href="#6-1-KMP算法-x2F-正则表达式相关函数的使用" class="headerlink" title="6.1 KMP算法&#x2F;正则表达式相关函数的使用"></a>6.1 KMP算法&#x2F;正则表达式相关函数的使用</h3><p>给定两个字符串<code>haystack</code>和<code>needle</code>，在<code>haystack</code>中找出<code>needle</code>字符串第一个匹配的下标，如果不存在，返回<code>-1</code></p>
<p>可以拓展到查找多个的场景</p>
<ul>
<li>KMP</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">strStr</span>(<span class="hljs-params">self, haystack: <span class="hljs-built_in">str</span>, needle: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        a=<span class="hljs-built_in">len</span>(needle)<br>        b=<span class="hljs-built_in">len</span>(haystack)<br>        <span class="hljs-keyword">if</span> a==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-built_in">next</span>=self.getnext(a,needle)<br>        p=-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(b):<br>            <span class="hljs-keyword">while</span> p&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> needle[p+<span class="hljs-number">1</span>]!=haystack[j]:<br>                p=<span class="hljs-built_in">next</span>[p]<br>            <span class="hljs-keyword">if</span> needle[p+<span class="hljs-number">1</span>]==haystack[j]:<br>                p+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> p==a-<span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> j-a+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">getnext</span>(<span class="hljs-params">self,a,needle</span>):<br>        <span class="hljs-built_in">next</span>=[<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(a)]<br>        k=-<span class="hljs-number">1</span><br>        <span class="hljs-built_in">next</span>[<span class="hljs-number">0</span>]=k<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(needle)):<br>            <span class="hljs-keyword">while</span> (k&gt;-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> needle[k+<span class="hljs-number">1</span>]!=needle[i]):<br>                k=<span class="hljs-built_in">next</span>[k]<br>            <span class="hljs-keyword">if</span> needle[k+<span class="hljs-number">1</span>]==needle[i]:<br>                k+=<span class="hljs-number">1</span><br>            <span class="hljs-built_in">next</span>[i]=k<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>str.find()</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">strStr</span>(<span class="hljs-params">self, haystack, needle</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type haystack: str</span><br><span class="hljs-string">        :type needle: str</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> haystack.find(needle)  <span class="hljs-comment"># 会返回第一次出现的位置，查找多个可以截断推导</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>re.finditer()</code>找到所有出现的位置</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re <br> <br><span class="hljs-comment"># defining string  </span><br>str1 = <span class="hljs-string">&quot;good. This dress looks good; you have good taste in clothes.&quot;</span><br> <br><span class="hljs-comment">#defining substring </span><br>substr = <span class="hljs-string">&quot;good&quot;</span><br><br>result = [_.start() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> re.finditer(substr, str1)] <br><span class="hljs-meta">&gt;&gt;&gt; </span>[<span class="hljs-number">0</span>, <span class="hljs-number">23</span>, <span class="hljs-number">38</span>]<br></code></pre></td></tr></table></figure>

<h3 id="6-2-马拉车算法（On求解最长最长回文子串）"><a href="#6-2-马拉车算法（On求解最长最长回文子串）" class="headerlink" title="6.2 马拉车算法（On求解最长最长回文子串）"></a>6.2 马拉车算法（On求解最长最长回文子串）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">manacher</span>(<span class="hljs-params">s</span>):<br> <br>    <span class="hljs-keyword">assert</span> <span class="hljs-string">&#x27;$&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;^&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;#&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> s<br>    <span class="hljs-keyword">if</span> s == <span class="hljs-string">&#x27;&#x27;</span>:<br>        <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>    t = <span class="hljs-string">&quot;^#&quot;</span> + <span class="hljs-string">&quot;#&quot;</span>.join(s) + <span class="hljs-string">&quot;#s&quot;</span><br>    c = <span class="hljs-number">0</span><br>    d = <span class="hljs-number">0</span><br>    p = [<span class="hljs-number">0</span>] * <span class="hljs-built_in">len</span>(t)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(t) - <span class="hljs-number">1</span>):<br>        mirror = <span class="hljs-number">2</span> * c - i<br>        p[i] = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">min</span>(d - i, p[mirror]))<br>        <span class="hljs-keyword">while</span> t[i + <span class="hljs-number">1</span> + p[i]] == t[i - <span class="hljs-number">1</span> - p[i]]:<br>            p[i] += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> i + p[i] &gt; d:<br>            c = i<br>            d = i + p[i]<br>    (k, i) = <span class="hljs-built_in">max</span>((p[i], i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(t) - <span class="hljs-number">1</span>))<br><br>    substr = s[(i - k) // <span class="hljs-number">2</span> : (i + k) // <span class="hljs-number">2</span>]<br>    len_of_substr = <span class="hljs-built_in">len</span>(substr)<br>    <span class="hljs-keyword">return</span> substr, len_of_substr<br><br><span class="hljs-meta">&gt;&gt;&gt; </span>substr, len_of_substr = manacher(<span class="hljs-string">&#x27;cabaabaabaa&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(substr, len_of_substr) <br>abaabaaba <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure>

<h3 id="6-3-回文"><a href="#6-3-回文" class="headerlink" title="6.3 回文"></a>6.3 回文</h3><ul>
<li>O(n&#x2F;2)判断是否是回文，</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">isPalindromic</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-comment"># 判断回文请用这个比较短的板子</span><br>    n = <span class="hljs-built_in">len</span>(s)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n//<span class="hljs-number">2</span>):<br>        <span class="hljs-keyword">if</span> s[i] != s[n-<span class="hljs-number">1</span>-i]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(isPalindromic(<span class="hljs-string">&quot;aba&quot;</span>))  <span class="hljs-comment"># True</span><br>    <br>    <span class="hljs-built_in">print</span>(isPalindromic(<span class="hljs-string">&quot;&quot;</span>))  <span class="hljs-comment"># True</span><br><br>    <span class="hljs-built_in">print</span>(isPalindromic(<span class="hljs-string">&quot;a&quot;</span>))  <span class="hljs-comment"># True</span><br><br>    <span class="hljs-built_in">print</span>(isPalindromic(<span class="hljs-string">&quot;ab&quot;</span>))  <span class="hljs-comment"># False</span><br></code></pre></td></tr></table></figure>

<h3 id="6-4-字符串哈希"><a href="#6-4-字符串哈希" class="headerlink" title="6.4 字符串哈希"></a>6.4 字符串哈希</h3><p>大概的思路是，对比两个字符串是否相等的时候，在字符串有增减的场景下，可以不断的O1来判断</p>
<ul>
<li>Leetcode1392. 最长快乐前缀</li>
</ul>
<p><strong>「快乐前缀」</strong>是在原字符串中既是 <strong>非空</strong> 前缀也是后缀（不包括字符串本身）的字符串。</p>
<p>给你一个字符串<code>s</code>，请你返回它的 <strong>最长快乐前缀</strong> 。如果不存在满足题意的前缀，则返回一个空字符串<code>&quot;&quot;</code>。</p>
<p>示例1：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：s = &quot;level&quot;<br>输出：&quot;l&quot;<br>解释：<br>不包括 s 自己<br>一共有 4 个前缀（&quot;l&quot;, &quot;le&quot;, &quot;lev&quot;, &quot;leve&quot;）和<br>4 个后缀（&quot;l&quot;, &quot;el&quot;, &quot;vel&quot;, &quot;evel&quot;）。<br>最长的既是前缀也是后缀的字符串是 &quot;l&quot; 。<br></code></pre></td></tr></table></figure>

<p>示例2：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入：s = &quot;ababab&quot;<br>输出：&quot;abab&quot;<br>解释：<br>&quot;abab&quot; 是最长的既是前缀也是后缀的字符串。<br>题目允许前后缀在原字符串中重叠。<br></code></pre></td></tr></table></figure>

<p>解答</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestPrefix</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type s: str</span><br><span class="hljs-string">        :rtype: str</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        mod = <span class="hljs-number">10</span>**<span class="hljs-number">9</span> + <span class="hljs-number">7</span><br>        product = <span class="hljs-number">31</span><br><br>        prefix = <span class="hljs-number">0</span><br>        subfix = <span class="hljs-number">0</span><br><br>        times = <span class="hljs-number">1</span><br>        res_idx = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>):<br>            prefix = prefix * product + (<span class="hljs-built_in">ord</span>(s[i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>))  <span class="hljs-comment"># 相当于往后拼</span><br>            prefix %= mod<br><br>            subfix = subfix + (<span class="hljs-built_in">ord</span>(s[<span class="hljs-built_in">len</span>(s)-<span class="hljs-number">1</span>-i]) - <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>)) * times  <span class="hljs-comment"># 相当于往前拼</span><br>            times *= product<br>            times %= mod<br>            subfix %= mod<br>        <br>            <span class="hljs-comment"># print(prefix)</span><br>            <span class="hljs-comment"># print(subfix)</span><br><br>            <span class="hljs-keyword">if</span> prefix == subfix:<br>                res_idx = i+<span class="hljs-number">1</span><br>        <br>        <span class="hljs-keyword">return</span> s[:res_idx]<br></code></pre></td></tr></table></figure>

<h3 id="6-5-常用正则表达式"><a href="#6-5-常用正则表达式" class="headerlink" title="6.5 常用正则表达式"></a>6.5 常用正则表达式</h3><h4 id="6-5-1-正则表达式基本规则"><a href="#6-5-1-正则表达式基本规则" class="headerlink" title="6.5.1 正则表达式基本规则"></a>6.5.1 正则表达式基本规则</h4><ul>
<li><p>字符: <code>a</code> <code>b</code> <code>c</code> <code>d</code> <code>1</code> <code>2</code> <code>3</code> <code>4</code> etc.</p>
</li>
<li><p>字符类: <code>.</code> <code>[abc]</code> <code>[a-z]</code> <code>\d</code> <code>\w</code> <code>\s</code></p>
</li>
<li><ul>
<li><code>.</code> 代表任何字符</li>
<li><code>\d 表示</code>“数字”</li>
<li><code>\w</code> 表示”字母”, <code>[0-9A-Za-z_]</code></li>
<li><code>\s </code>表示 “空格, 制表符,回车或换行符”</li>
<li>否定字符类: <code>[^abc]</code> <code>\D</code> <code>\W</code> <code>\S</code></li>
</ul>
</li>
<li><p>重复: <code>&#123;4&#125;</code> <code>&#123;3,16&#125;</code> <code>&#123;1,&#125;</code> <code>?</code> <code>*</code> <code>+</code></p>
</li>
<li><ul>
<li><code>?</code> 表示 “零次或一次”</li>
<li><code>*</code> 表示 “大于零次”</li>
<li><code>+</code> 表示 “一次或一次以上”</li>
<li>如果不加上？，所有的重复都是最长匹配的（贪婪）</li>
</ul>
</li>
<li><p>分组: <code>(Septem|Octo|Novem|Decem)ber</code></p>
</li>
<li><p>词，行以及文本的分隔: <code>\b</code> <code>^</code> <code>$</code> <code>\A</code> <code>\z</code></p>
</li>
<li><p>转义字符: <code>\1</code> <code>\2</code> <code>\3</code> etc. (在匹配表达式和替换表达式中都可用)</p>
</li>
<li><p>元字符: <code>.</code> <code>\</code> <code>[</code> <code>]</code> <code>&#123;</code> <code>&#125;</code> <code>?</code> <code>*</code> <code>+</code> <code>|</code> <code>(</code> <code>)</code> <code>^</code> <code>$</code></p>
</li>
<li><p>在字符类中使用元字符: <code>[</code> <code>]</code> <code>\</code> <code>-</code> <code>^</code></p>
</li>
<li><p>使用反斜杠可以忽略元字符: <code>\</code></p>
</li>
</ul>
<h4 id="6-5-2-在Python中使用正则表达式"><a href="#6-5-2-在Python中使用正则表达式" class="headerlink" title="6.5.2 在Python中使用正则表达式"></a>6.5.2 在Python中使用正则表达式</h4><p>正则表达式在python通过下面这个方式来使用</p>
<ul>
<li><code>re.sub(pattern, replace_str, input_str</code>BJUTACM-17蓝桥杯预选</li>
</ul>
<p>判断一下一个网址是否符合 <a target="_blank" rel="noopener" href="http://a.b.c.d/">http://a.b.c.d/</a> 的格式吧。 (a, b, c, d 均为长度在 [1, 5] 且由数字 0-9 构成的字符串)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;http://[0-9]&#123;1,5&#125;\.[0-9]&#123;1,5&#125;\.[0-9]&#123;1,5&#125;\.[0-9]&#123;1,5&#125;/&#x27;</span>)<br>    input_str = <span class="hljs-built_in">input</span>().strip()<br>	<br>    <span class="hljs-comment"># 使用替换的思路，替换成特殊字符或者空格，也是常用的技巧</span><br>    tmp_str = re.sub(pattern, <span class="hljs-string">&#x27;&#x27;</span>, input_str)  <br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(tmp_str) == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;YES&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;NO&quot;</span>)<br><br>http://<span class="hljs-number">172.21</span><span class="hljs-number">.17</span><span class="hljs-number">.211</span>/<br>YES   <br></code></pre></td></tr></table></figure>

<ul>
<li><code>re.match(pattern, input_str)</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>line = <span class="hljs-string">&quot;Cats are smarter than dogs&quot;</span><br><br>pattern = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&quot;(.*) are (.*?) .*&quot;</span>, re.M | re.I)  <span class="hljs-comment"># re.I表示忽略大小写</span><br><br>match_obj = re.<span class="hljs-keyword">match</span>(pattern, line)  <br><br><span class="hljs-keyword">if</span> match_obj:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;match_obj.group(): &quot;</span>, match_obj.group())<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;match_obj.group(1): &quot;</span>, match_obj.group(<span class="hljs-number">1</span>))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;match_obj.group(2): &quot;</span>, match_obj.group(<span class="hljs-number">2</span>))<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No match&quot;</span>)<br><br>match_obj.group():  Cats are smarter than dogs<br>match_obj.group(<span class="hljs-number">1</span>):  Cats<br>match_obj.group(<span class="hljs-number">2</span>):  smarter<br></code></pre></td></tr></table></figure>

<h2 id="7-经典算法（最长上升-x2F-公共子序列，多类背包，…）"><a href="#7-经典算法（最长上升-x2F-公共子序列，多类背包，…）" class="headerlink" title="7. 经典算法（最长上升&#x2F;公共子序列，多类背包，…）"></a>7. 经典算法（最长上升&#x2F;公共子序列，多类背包，…）</h2><h3 id="7-1-最长公共子序列"><a href="#7-1-最长公共子序列" class="headerlink" title="7.1 最长公共子序列"></a>7.1 最长公共子序列</h3><ul>
<li>不带记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestCommonSubsequence</span>(<span class="hljs-params">self, text1, text2</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        :type text1: str</span><br><span class="hljs-string">        :type text2: str</span><br><span class="hljs-string">        :rtype: int</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        dp = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(text2)+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(text1)+<span class="hljs-number">1</span>)]  <span class="hljs-comment"># h横代表text1，纵代表text2</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(text1)+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(text2)+<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> text1[i-<span class="hljs-number">1</span>] == text2[j-<span class="hljs-number">1</span>]:<br>                    dp[i][j] = dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j-<span class="hljs-number">1</span>], dp[i-<span class="hljs-number">1</span>][j])<br>        <span class="hljs-comment"># print(dp)</span><br>        <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(text1)][<span class="hljs-built_in">len</span>(text2)]<br></code></pre></td></tr></table></figure>

<ul>
<li>一维数组dp+不带记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestCommonSubsequence</span>(<span class="hljs-params">self, text1: <span class="hljs-built_in">str</span>, text2: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n1 = <span class="hljs-built_in">len</span>(text1)<br>        n2 = <span class="hljs-built_in">len</span>(text2)<br>        dp = [<span class="hljs-number">0</span>] * (n2+<span class="hljs-number">1</span>) <span class="hljs-comment"># 优化空间，仅仅使用一维数组进行dp</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n1+<span class="hljs-number">1</span>):<br>            prev = dp[<span class="hljs-number">0</span>]<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n2+<span class="hljs-number">1</span>):<br>                tmp = dp[j]<br>                <br>                <span class="hljs-keyword">if</span> text1[i-<span class="hljs-number">1</span>] == text2[j-<span class="hljs-number">1</span>]:<br>                    dp[j] = prev + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j-<span class="hljs-number">1</span>])<br><br>                prev = tmp<br>        <span class="hljs-keyword">return</span> dp[n2]<br></code></pre></td></tr></table></figure>

<h3 id="7-2-最长上升子序列"><a href="#7-2-最长上升子序列" class="headerlink" title="7.2 最长上升子序列"></a>7.2 最长上升子序列</h3><ul>
<li>不带记录</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Dynamic programming + Dichotomy.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLIS</span>(<span class="hljs-params">self, nums: [<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        tails, res = [<span class="hljs-number">0</span>] * <span class="hljs-built_in">len</span>(nums), <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            i, j = <span class="hljs-number">0</span>, res<br>            <span class="hljs-keyword">while</span> i &lt; j:<br>                m = (i + j) // <span class="hljs-number">2</span><br>                <span class="hljs-keyword">if</span> tails[m] &lt; num: i = m + <span class="hljs-number">1</span> <span class="hljs-comment"># 如果要求非严格递增，将此行 &#x27;&lt;&#x27; 改为 &#x27;&lt;=&#x27; 即可。</span><br>                <span class="hljs-keyword">else</span>: j = m<br>            tails[i] = num<br>            <span class="hljs-keyword">if</span> j == res: res += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>

<ul>
<li>带记录+库函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> bisect<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLIS</span>(<span class="hljs-params">self, nums</span>):<br>        dp = [nums[<span class="hljs-number">0</span>]]<br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums[<span class="hljs-number">1</span>:]:<br>            i = bisect.bisect_left(dp, num)<br>            <span class="hljs-keyword">if</span> i &lt; <span class="hljs-built_in">len</span>(dp):<br>                dp[i] = num<br>            <span class="hljs-keyword">else</span>:<br>                dp.append(num)<br>        <span class="hljs-built_in">print</span>(dp)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(dp)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    S = Solution()<br><br>    nums = [<span class="hljs-number">10</span>,<span class="hljs-number">9</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>,<span class="hljs-number">101</span>,<span class="hljs-number">18</span>]<br>    <span class="hljs-built_in">print</span>(S.lengthOfLIS(nums))<br></code></pre></td></tr></table></figure>

<h3 id="7-3-背包相关"><a href="#7-3-背包相关" class="headerlink" title="7.3 背包相关"></a>7.3 背包相关</h3><ul>
<li>0-1背包（注：可以用后面的多重背包给简化了， 简化成一维的）</li>
</ul>
<p>N种物品和一个容量是V的背包，每种物品只可用<strong>1次</strong></p>
<p>第i种物品的体积是v_i，价值是w_i</p>
<p>求解将哪些物品装入背包，可使这些物品总体积不超过背包容量，且总价值最大</p>
<p>输出最大价值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">输入</span><br>4 5  # N, V<br>1 2  # vi, wi<br>2 4<br>3 4<br>4 5<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出</span><br>8<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># N件物品，一个容量为V的背包</span><br>N,V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>weight = []<br>val = []<br><span class="hljs-comment"># 创建两个列表，分别装入第i个物品的体积wi和价值vi</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    wi,vi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    weight.append(wi)<br>    val.append(vi)<br><span class="hljs-comment"># base case: dp[0][...] = dp[...][0]=0</span><br>dp = [[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N+<span class="hljs-number">1</span>)] <span class="hljs-comment"># (N+1)*(V+1) </span><br><span class="hljs-comment"># dp[i][w]代表对于前i个物品，当背包容量为w时，可以装的最大价值</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,V+<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 简化版本</span><br>        dp[i][w] = dp[i-<span class="hljs-number">1</span>][w]<br>        <span class="hljs-keyword">if</span> w-weight[i-<span class="hljs-number">1</span>]&gt;=<span class="hljs-number">0</span>:<br>            dp[i][w] = <span class="hljs-built_in">max</span>(dp[i][w], dp[i-<span class="hljs-number">1</span>][w-weight[i-<span class="hljs-number">1</span>]]+val[i-<span class="hljs-number">1</span>])<br><span class="hljs-built_in">print</span>(dp[N][V])<br></code></pre></td></tr></table></figure>

<ul>
<li>完全背包</li>
</ul>
<p>N种物品和一个容量是V的背包，每种物品都有<strong>无限件</strong>可用</p>
<p>第i种物品的体积是v_i，价值是w_i</p>
<p>求解将哪些物品装入背包，可使这些物品总体积不超过背包容量，且总价值最大</p>
<p>输出最大价值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">输入</span><br>4 5  # N, V<br>1 2  # vi, wi<br>2 4<br>3 4<br>4 5<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出</span><br>10<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">N,V = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>weight = []<br>val = []<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>    wi,vi = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())<br>    weight.append(wi)<br>    val.append(vi)<br><span class="hljs-comment"># dp[i][j]代表使用前i个物品，针对容量j的最大价值</span><br><span class="hljs-comment"># dp[0][...] 为0， dp[...][0]为0</span><br>dp = [[<span class="hljs-number">0</span>]*(V+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,V+<span class="hljs-number">1</span>):<br>        dp[i][j] = dp[i-<span class="hljs-number">1</span>][j]<br>        <span class="hljs-keyword">if</span> j&gt;=weight[i-<span class="hljs-number">1</span>]:<br>            dp[i][j] = <span class="hljs-built_in">max</span>(dp[i][j], dp[i][j-weight[i-<span class="hljs-number">1</span>]]+val[i-<span class="hljs-number">1</span>])<br><span class="hljs-comment"># print(dp)</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">max</span>(dp[N]))<br></code></pre></td></tr></table></figure>

<ul>
<li>多重背包-simple</li>
</ul>
<p>有N种物品和一个容量是V的背包</p>
<p>第i种物品最多有s_i件，每件体积是v_i，价值是w_i</p>
<p>求解将哪些物品装入背包，可以使物品总体积不超过背包容量，且总价值最大</p>
<p>输出最大价值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">输入</span><br>4 5  # N, V<br>1 2 3  # v_i, w_i, s_i<br>2 4 1<br>3 4 3<br>4 5 2<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">输出</span><br>10<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1005</span>],n,t,v,w,s;<br><span class="hljs-built_in">main</span>()<br>&#123;<br>    cin&gt;&gt;n&gt;&gt;t;<br>    <span class="hljs-keyword">while</span>(n--)<br>    &#123;<br>        cin&gt;&gt;w&gt;&gt;v&gt;&gt;s;<br>        <span class="hljs-keyword">while</span>(s--)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=t;j&gt;=w;j--)<br>            	dp[j]=<span class="hljs-built_in">max</span>(dp[j],dp[j-w]+v);<br>    &#125;<br>    cout&lt;&lt;dp[t];<br>&#125;<br></code></pre></td></tr></table></figure>

<p>二进制优化：TODO</p>
<p>单调队列优化：TODO</p>
<h2 id="8-DP"><a href="#8-DP" class="headerlink" title="8. DP"></a>8. DP</h2><h3 id="8-1-数位dp（暂时列举系列题目了）"><a href="#8-1-数位dp（暂时列举系列题目了）" class="headerlink" title="8.1 数位dp（暂时列举系列题目了）"></a>8.1 数位dp（暂时列举系列题目了）</h3><h4 id="8-1-1-数字1的个数"><a href="#8-1-1-数字1的个数" class="headerlink" title="8.1.1 数字1的个数"></a>8.1.1 数字1的个数</h4><p>给定一个整数 <code>n</code>，计算所有小于等于 <code>n</code> 的非负整数中数字 <code>1</code> 出现的个数。</p>
<p><strong>示例 1：</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">输入：n <span class="hljs-operator">=</span> <span class="hljs-number">13</span><br>输出：<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>

<p><strong>示例 2：</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">输入：n <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>输出：<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<ul>
<li><code>0 &lt;= n &lt;= 109</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">countDigitOne</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-comment"># 数位dp</span><br>        s = <span class="hljs-built_in">str</span>(n)  <span class="hljs-comment"># 把n转成字符串的形式</span><br>        <br>        <span class="hljs-comment"># 返回从i开始填数字，i前面填的数字的集合是mask，此时能够造出的特殊整数的数目</span><br>        <span class="hljs-comment"># is_limit 表示前面填的数字是否**都是**n对应位上的，如果为True那么当前位至多为int(s[i])，否则至多为9</span><br>        <span class="hljs-comment"># is_num 表示前面是否填了数字（是否跳过），如果为True那么当前位可以从0开始，如果为False那么我们可以直接跳过或者从1开始填数字</span><br><span class="hljs-meta">        @cache</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">i: <span class="hljs-built_in">int</span>, mask: <span class="hljs-built_in">int</span>, is_limit: <span class="hljs-built_in">bool</span>, is_num: <span class="hljs-built_in">bool</span>, cnt1: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>            <span class="hljs-comment"># 判断终点，到达终点后如果之前填过数字那么返回1表示已经构造出一个特殊整数了，否则return0</span><br>            <span class="hljs-keyword">if</span> i == <span class="hljs-built_in">len</span>(s):<br>                <span class="hljs-keyword">return</span> cnt1<br>            res = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_num:  <span class="hljs-comment"># 如果不是数字的话，选择跳过不填数字</span><br>                res = f(i+<span class="hljs-number">1</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, cnt1)<br>            <span class="hljs-comment"># 上界，如果is_limit则是s[i]这个位置的值，否则是9</span><br>            up = <span class="hljs-built_in">int</span>(s[i]) <span class="hljs-keyword">if</span> is_limit <span class="hljs-keyword">else</span> <span class="hljs-number">9</span><br>			<span class="hljs-comment"># 枚举要填的数字，枚举的范围取决于is_limit和is_num</span><br>            <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> is_num <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>, up+<span class="hljs-number">1</span>):  <span class="hljs-comment"># 这里决定了如果给1234，那么不会走到1235的情况</span><br>                <span class="hljs-keyword">if</span> d == <span class="hljs-number">1</span>:<br>                    res += f(i+<span class="hljs-number">1</span>, <span class="hljs-literal">None</span>, is_limit <span class="hljs-keyword">and</span> d == up, <span class="hljs-literal">True</span>, cnt1+<span class="hljs-number">1</span>)<br>                <span class="hljs-keyword">else</span>:<br>                    res += f(i+<span class="hljs-number">1</span>, <span class="hljs-literal">None</span>, is_limit <span class="hljs-keyword">and</span> d == up, <span class="hljs-literal">True</span>, cnt1)<br><br>            <span class="hljs-keyword">return</span> res<br>       <br>        <span class="hljs-keyword">return</span> f(<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-number">0</span>)  <span class="hljs-comment"># 为什么is_limit要初始化成True因为后面填的要受到约束；</span><br></code></pre></td></tr></table></figure>

<h4 id="8-1-2-最大为N的数字组合"><a href="#8-1-2-最大为N的数字组合" class="headerlink" title="8.1.2 最大为N的数字组合"></a>8.1.2 最大为N的数字组合</h4><p>给定一个按 非递减顺序 排列的数字数组 digits 。你可以用任意次数 digits[i] 来写的数字。例如，如果 digits &#x3D; [‘1’,’3’,’5’]，我们可以写数字，如 ‘13’, ‘551’, 和 ‘1351315’。</p>
<p>返回 可以生成的小于或等于给定整数 n 的正整数的个数 。</p>
<p>示例 1：</p>
<p>输入：digits &#x3D; [“1”,”3”,”5”,”7”], n &#x3D; 100<br>输出：20<br>解释：<br>可写出的 20 个数字是：<br>1, 3, 5, 7, 11, 13, 15, 17, 31, 33, 35, 37, 51, 53, 55, 57, 71, 73, 75, 77.<br>示例 2：</p>
<p>输入：digits &#x3D; [“1”,”4”,”9”], n &#x3D; 1000000000<br>输出：29523<br>解释：<br>我们可以写 3 个一位数字，9 个两位数字，27 个三位数字，<br>81 个四位数字，243 个五位数字，729 个六位数字，<br>2187 个七位数字，6561 个八位数字和 19683 个九位数字。<br>总共，可以使用D中的数字写出 29523 个整数。<br>示例 3:</p>
<p>输入：digits &#x3D; [“7”], n &#x3D; 8<br>输出：1</p>
<p>提示：</p>
<p>1 &lt;&#x3D; digits.length &lt;&#x3D; 9<br>digits[i].length &#x3D;&#x3D; 1<br>digits[i] 是从 ‘1’ 到 ‘9’ 的数<br>digits 中的所有值都 不同<br>digits 按 非递减顺序 排列<br>1 &lt;&#x3D; n &lt;&#x3D; 109</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029234931350.png" srcset="/img/loading.gif" lazyload alt="image-20221029234931350" style="zoom:80%;" />

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">atMostNGivenDigitSet</span>(<span class="hljs-params">self, digits: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        s = <span class="hljs-built_in">str</span>(n)<br><span class="hljs-meta">        @cache</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">i: <span class="hljs-built_in">int</span>, is_limit: <span class="hljs-built_in">bool</span>, is_num: <span class="hljs-built_in">bool</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>            <span class="hljs-keyword">if</span> i == <span class="hljs-built_in">len</span>(s): <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(is_num)  <span class="hljs-comment"># 如果填了数字，则为 1 种合法方案</span><br>            res = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_num:  <span class="hljs-comment"># 前面不填数字，那么可以跳过当前数位，也不填数字</span><br>                <span class="hljs-comment"># is_limit 改为 False，因为没有填数字，位数都比 n 要短，自然不会受到 n 的约束</span><br>                <span class="hljs-comment"># is_num 仍然为 False，因为没有填任何数字</span><br>                res = f(i + <span class="hljs-number">1</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>)<br>            up = s[i] <span class="hljs-keyword">if</span> is_limit <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;9&#x27;</span>  <span class="hljs-comment"># 根据是否受到约束，决定可以填的数字的上限</span><br>            <span class="hljs-comment"># 注意：对于一般的题目而言，如果此时 is_num 为 False，则必须从 1 开始枚举，由于本题 digits 没有 0，所以无需处理这种情况</span><br>            <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> digits:  <span class="hljs-comment"># 枚举要填入的数字 d</span><br>                <span class="hljs-keyword">if</span> d &gt; up: <span class="hljs-keyword">break</span>  <span class="hljs-comment"># d 超过上限，由于 digits 是有序的，后面的 d 都会超过上限，故退出循环</span><br>                <span class="hljs-comment"># is_limit：如果当前受到 n 的约束，且填的数字等于上限，那么后面仍然会受到 n 的约束</span><br>                <span class="hljs-comment"># is_num 为 True，因为填了数字</span><br>                res += f(i + <span class="hljs-number">1</span>, is_limit <span class="hljs-keyword">and</span> d == up, <span class="hljs-literal">True</span>)<br>            <span class="hljs-keyword">return</span> res<br>        <span class="hljs-keyword">return</span> f(<span class="hljs-number">0</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>

<h4 id="8-1-3-统计特殊整数"><a href="#8-1-3-统计特殊整数" class="headerlink" title="8.1.3 统计特殊整数"></a>8.1.3 统计特殊整数</h4><p>如果一个正整数每一个数位都是 互不相同 的，我们称它是 特殊整数 。</p>
<p>给你一个 正 整数 n ，请你返回区间 [1, n] 之间特殊整数的数目。</p>
<p>示例 1：</p>
<p>输入：n &#x3D; 20<br>输出：19<br>解释：1 到 20 之间所有整数除了 11 以外都是特殊整数。所以总共有 19 个特殊整数。<br>示例 2：</p>
<p>输入：n &#x3D; 5<br>输出：5<br>解释：1 到 5 所有整数都是特殊整数。<br>示例 3：</p>
<p>输入：n &#x3D; 135<br>输出：110<br>解释：从 1 到 135 总共有 110 个整数是特殊整数。<br>不特殊的部分数字为：22 ，114 和 131 。</p>
<p>提示：</p>
<p>1 &lt;&#x3D; n &lt;&#x3D; 2 * 109</p>
<img src="http://yixuan004.oss-cn-hangzhou.aliyuncs.com/img/image-20221029235036694.png" srcset="/img/loading.gif" lazyload alt="image-20221029235036694" style="zoom:80%;" />

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 数位dp模板如下，以这个题目为例，这里是记忆化搜索的话写成python3的形式了</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">countSpecialNumbers</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-comment"># 数位dp</span><br>        s = <span class="hljs-built_in">str</span>(n)  <span class="hljs-comment"># 把n转成字符串的形式</span><br>        <br>        <span class="hljs-comment"># 返回从i开始填数字，i前面填的数字的集合是mask，此时能够造出的特殊整数的数目</span><br>        <span class="hljs-comment"># is_limit 表示前面填的数字是否**都是**n对应位上的，如果为True那么当前位至多为int(s[i])，否则至多为9</span><br>        <span class="hljs-comment"># is_num 表示前面是否填了数字（是否跳过），如果为True那么当前位可以从0开始，如果为False那么我们可以直接跳过或者从1开始填数字</span><br><span class="hljs-meta">        @cache</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">i: <span class="hljs-built_in">int</span>, mask: <span class="hljs-built_in">int</span>, is_limit: <span class="hljs-built_in">bool</span>, is_num: <span class="hljs-built_in">bool</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>            <span class="hljs-comment"># 判断终点，到达终点后如果之前填过数字那么返回1表示已经构造出一个特殊整数了，否则return0</span><br>            <span class="hljs-keyword">if</span> i == <span class="hljs-built_in">len</span>(s):<br>                <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(is_num)<br>            res = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_num:  <span class="hljs-comment"># 如果不是数字的话，选择跳过不填数字</span><br>                res = f(i+<span class="hljs-number">1</span>, mask, <span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>)<br>            <span class="hljs-comment"># 上界，如果is_limit则是s[i]这个位置的值，否则是9</span><br>            up = <span class="hljs-built_in">int</span>(s[i]) <span class="hljs-keyword">if</span> is_limit <span class="hljs-keyword">else</span> <span class="hljs-number">9</span><br>			<span class="hljs-comment"># 枚举数字</span><br>            <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> is_num <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>, up+<span class="hljs-number">1</span>):  <span class="hljs-comment"># 这里决定了如果给1234，那么不会走到1235的情况</span><br>                <span class="hljs-comment"># 判断一下mask里面有没有d，首先这里mask虽然是一个int但是代表了一个数组！</span><br>                <span class="hljs-comment"># mask很巧妙的0-9这种的，第几位就代表有没有</span><br>                <span class="hljs-keyword">if</span> mask &gt;&gt; d &amp; <span class="hljs-number">1</span> == <span class="hljs-number">0</span>:  <br>                    res += f(i+<span class="hljs-number">1</span>, mask|(<span class="hljs-number">1</span>&lt;&lt;d), is_limit <span class="hljs-keyword">and</span> d == up, <span class="hljs-literal">True</span>)  <span class="hljs-comment"># 如果满足条件我要选的话，就把1左移d位那个地方放上</span><br>            <span class="hljs-keyword">return</span> res<br>       <br>        <span class="hljs-keyword">return</span> f(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>


                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/algorithms/" class="category-chain-item">algorithms</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/algorithms/">#algorithms</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>算法模板整理-python</div>
      <div>http://example.com/2023/01/01/algorithms/算法模板整理-python/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Curious;</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年1月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/01/02/develop/java/javase/JavaSE-4%E8%BF%9B%E9%98%B6%E6%B5%81%E5%BC%82%E5%B8%B8%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%AD%89/" title="JavaSE-4进阶流异常日志文件等">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaSE-4进阶流异常日志文件等</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/01/01/algorithms/leetcode-weekly-contest/326%E5%9C%BALeetCode%E5%91%A8%E8%B5%9B/" title="326场LeetCode周赛">
                        <span class="hidden-mobile">326场LeetCode周赛</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
